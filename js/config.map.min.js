$(()=>{if(document.getElementById&&document.getElementById("map_canvas")){function e(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}function t(){if(""==$('input[name="myGmaps_center"]').attr("value"))var t=new google.maps.LatLng(43.0395797336425,6.126280043989323),a="12";else{const o=$('input[name="myGmaps_center"]').attr("value").split(","),p=parseFloat(e(o[0])),n=parseFloat(e(o[1]));t=new google.maps.LatLng(p,n),a=$('input[name="myGmaps_zoom"]').attr("value")}google.maps.event.trigger(n,"resize"),n.setCenter(t),n.setZoom(parseFloat(a))}if($("#settings").on("onetabload",()=>{t()}),""==$('input[name="myGmaps_center"]').attr("value"))var a=new google.maps.LatLng(43.0395797336425,6.126280043989323),o="12",p="roadmap";else{const t=$('input[name="myGmaps_center"]').attr("value").split(","),n=parseFloat(e(t[0])),s=parseFloat(e(t[1]));a=new google.maps.LatLng(n,s),o=$('input[name="myGmaps_zoom"]').attr("value"),p=$('input[name="myGmaps_type"]').attr("value")}const l=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,"OpenStreetMap","neutral_blue"],g=$("#map_styles_list").attr("value"),d=g.split(",");for(i in d)s=d[i].replace("_styles.js",""),l.push(s);const c={zoom:parseFloat(o),center:a,scrollwheel:!1,mapTypeControl:!0,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:l}};var n=new google.maps.Map(document.getElementById("map_canvas"),c);const y='<a href="https://www.openstreetmap.org/copyright">Â© OpenStreetMap Contributors</a>',u=document.createElement("div");for(i in u.id="credit-control",u.style.fontSize="10px",u.style.fontFamily="Arial, sans-serif",u.style.margin="0",u.style.whitespace="nowrap",u.index=0,"roadmap"==p?n.setOptions({mapTypeId:google.maps.MapTypeId.ROADMAP}):"satellite"==p?n.setOptions({mapTypeId:google.maps.MapTypeId.SATELLITE}):"hybrid"==p?n.setOptions({mapTypeId:google.maps.MapTypeId.HYBRID}):"terrain"==p?n.setOptions({mapTypeId:google.maps.MapTypeId.TERRAIN}):"OpenStreetMap"==p?(n.setOptions({mapTypeId:"OpenStreetMap"}),n.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(u),u.innerHTML=y):n.setOptions({mapTypeId:p}),n.mapTypes.set("neutral_blue",neutral_blue),n.mapTypes.set("OpenStreetMap",new google.maps.ImageMapType({getTileUrl:(e,t)=>`https://tile.openstreetmap.org/${t}/${e.x}/${e.y}.png`,tileSize:new google.maps.Size(256,256),name:"OpenStreetMap",maxZoom:18})),l)if(!(i<6)){var s=window[l[i]];n.mapTypes.set(l[i],s)}geocoder=new google.maps.Geocoder;const T=document.getElementById("address");new google.maps.places.Autocomplete(T);function r(){const e=document.getElementById("address").value;geocoder.geocode({address:e,partialmatch:!0},m)}function m(e,t){"OK"==t&&e.length>0?n.fitBounds(e[0].geometry.viewport):alert(`Geocode was not successful for the following reason: ${t}`)}google.maps.event.addListener(n,"center_changed",()=>{window.setTimeout(()=>{n.getCenter()},100)}),google.maps.event.addListener(n,"maptypeid_changed",()=>{"OpenStreetMap"==n.getMapTypeId()?(n.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(u),u.innerHTML=y):n.controls[google.maps.ControlPosition.BOTTOM_RIGHT].clear(u)}),$("#geocode").on("click",()=>(r(),!1)),$("#config-form").submit(()=>{const e=`${n.getCenter().lat()}, ${n.getCenter().lng()}`,t=n.getZoom(),a=n.getMapTypeId();return $('input[name="myGmaps_center"]').attr("value",e),$('input[name="myGmaps_zoom"]').attr("value",t),$('input[name="myGmaps_type"]').attr("value",a),!0})}});