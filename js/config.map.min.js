"use strict";dotclear.ready(()=>{async function e(){function e(){console.log(M.getPlace().fillInAddress)}function o(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}const{Map:a}=await google.maps.importLibrary("maps"),{Places:n}=await google.maps.importLibrary("places"),p=document.querySelector('input[name="myGmaps_center"]');let l,s,r;if(""===p.value)l=new google.maps.LatLng(43.0395797336425,6.126280043989323),s="12",r="roadmap";else{const e=p.value.split(","),t=parseFloat(o(e[0])),a=parseFloat(o(e[1]));l=new google.maps.LatLng(t,a),s=document.querySelector('input[name="myGmaps_zoom"]').value,r=document.querySelector('input[name="myGmaps_type"]').value}const m=[{featureType:"water",elementType:"geometry",stylers:[{color:"#193341"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2c5a71"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#29768a"},{lightness:-37}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#406d80"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#406d80"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#3e606f"},{weight:2},{gamma:.84}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry",stylers:[{weight:.6},{color:"#1a3541"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#2c5a71"}]}],y=new google.maps.StyledMapType(m,{name:"Neutral Blue"}),i=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,"OpenStreetMap","neutral_blue"],c=document.getElementById("map_styles_list").value,g=c.split(",");for(const e in g){const t=g[e].replace("_styles.js","");i.push(t);const o=dotclear.getData(t);window[t]=new google.maps.StyledMapType(o.style,{name:o.name})}const d={zoom:parseFloat(s),center:l,scrollwheel:!1,mapTypeControl:!0,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:i}};t=new a(document.getElementById("map_canvas"),d);const u='<a href="https://www.openstreetmap.org/copyright">Â© OpenStreetMap Contributors</a>',T=document.createElement("div");T.id="credit-control",T.style.fontSize="10px",T.style.fontFamily="Arial, sans-serif",T.style.margin="0",T.style.whiteSpace="nowrap",T.index=0,"roadmap"===r?t.setOptions({mapTypeId:google.maps.MapTypeId.ROADMAP}):"satellite"===r?t.setOptions({mapTypeId:google.maps.MapTypeId.SATELLITE}):"hybrid"===r?t.setOptions({mapTypeId:google.maps.MapTypeId.HYBRID}):"terrain"===r?t.setOptions({mapTypeId:google.maps.MapTypeId.TERRAIN}):"OpenStreetMap"===r?(t.setOptions({mapTypeId:"OpenStreetMap"}),t.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(T),T.innerHTML=u):t.setOptions({mapTypeId:r}),t.mapTypes.set("neutral_blue",y),t.mapTypes.set("OpenStreetMap",new google.maps.ImageMapType({getTileUrl:(e,t)=>`https://tile.openstreetmap.org/${t}/${e.x}/${e.y}.png`,tileSize:new google.maps.Size(256,256),name:"OpenStreetMap",maxZoom:18}));for(const e in i){if(e<6)continue;const o=window[i[e]];t.mapTypes.set(i[e],o)}new google.maps.Geocoder;const I=document.getElementById("address"),f=document.getElementById("map_toolbar"),M=new google.maps.places.PlaceAutocompleteElement;f.appendChild(M),f.replaceChild(M,I),M.addListener("place_changed",fillInAddress),document.getElementById("geocode").addEventListener("click",t=>{t.preventDefault(),e()}),google.maps.event.addListener(t,"center_changed",()=>{window.setTimeout(()=>{const e=t.getCenter();document.querySelector('input[name="myGmaps_center"]').value=e},100)}),google.maps.event.addListener(t,"maptypeid_changed",function(){"OpenStreetMap"===t.getMapTypeId()?(t.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(T),T.innerHTML=u):t.controls[google.maps.ControlPosition.BOTTOM_RIGHT].clear(T);const e=t.getMapTypeId();document.querySelector('input[name="myGmaps_type"]').value=e}),google.maps.event.addListener(t,"zoom_changed",function(){const e=t.getZoom();document.querySelector('input[name="myGmaps_zoom"]').value=e}),document.getElementById("module_config").addEventListener("submit",()=>{const e=`${t.getCenter().lat()}, ${t.getCenter().lng()}`,o=t.getZoom(),a=t.getMapTypeId();return document.querySelector('input[name="myGmaps_center"]').value=e,document.querySelector('input[name="myGmaps_zoom"]').value=o,document.querySelector('input[name="myGmaps_type"]').value=a,!0})}if(!document.getElementById)return;if(!document.getElementById("map_canvas"))return;let t;e()});