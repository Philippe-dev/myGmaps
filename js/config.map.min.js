$(()=>{async function e(){const{Map:e}=await google.maps.importLibrary("maps"),{Places:o}=await google.maps.importLibrary("places");if(""==$('input[name="myGmaps_center"]').attr("value"))var a=new google.maps.LatLng(43.0395797336425,6.126280043989323),n="12",s="roadmap";else{const e=$('input[name="myGmaps_center"]').attr("value").split(","),o=parseFloat(t(e[0])),p=parseFloat(t(e[1]));a=new google.maps.LatLng(o,p),n=$('input[name="myGmaps_zoom"]').attr("value"),s=$('input[name="myGmaps_type"]').attr("value")}const l=[{featureType:"water",elementType:"geometry",stylers:[{color:"#193341"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2c5a71"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#29768a"},{lightness:-37}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#406d80"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#406d80"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#3e606f"},{weight:2},{gamma:.84}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry",stylers:[{weight:.6},{color:"#1a3541"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#2c5a71"}]}],r=new google.maps.StyledMapType(l,{name:"Neutral Blue"}),m=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,"OpenStreetMap","neutral_blue"],y=$("#map_styles_list").attr("value"),g=y.split(",");for(i in g){value=g[i].replace("_styles.js",""),m.push(value);const e=dotclear.getData(value);window[`${value}`]=new google.maps.StyledMapType(e.style,{name:e.name})}const c={zoom:parseFloat(n),center:a,scrollwheel:!1,mapTypeControl:!0,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:m}};p=new e(document.getElementById("map_canvas"),c);const d='<a href="https://www.openstreetmap.org/copyright">Â© OpenStreetMap Contributors</a>',T=document.createElement("div");for(i in T.id="credit-control",T.style.fontSize="10px",T.style.fontFamily="Arial, sans-serif",T.style.margin="0",T.style.whitespace="nowrap",T.index=0,"roadmap"==s?p.setOptions({mapTypeId:google.maps.MapTypeId.ROADMAP}):"satellite"==s?p.setOptions({mapTypeId:google.maps.MapTypeId.SATELLITE}):"hybrid"==s?p.setOptions({mapTypeId:google.maps.MapTypeId.HYBRID}):"terrain"==s?p.setOptions({mapTypeId:google.maps.MapTypeId.TERRAIN}):"OpenStreetMap"==s?(p.setOptions({mapTypeId:"OpenStreetMap"}),p.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(T),T.innerHTML=d):p.setOptions({mapTypeId:s}),p.mapTypes.set("neutral_blue",r),p.mapTypes.set("OpenStreetMap",new google.maps.ImageMapType({getTileUrl:(e,t)=>`https://tile.openstreetmap.org/${t}/${e.x}/${e.y}.png`,tileSize:new google.maps.Size(256,256),name:"OpenStreetMap",maxZoom:18})),m){if(i<6)continue;const e=window[m[i]];p.mapTypes.set(m[i],e)}geocoder=new google.maps.Geocoder;const u=document.getElementById("address");new google.maps.places.Autocomplete(u);google.maps.event.addListener(p,"center_changed",()=>{window.setTimeout(()=>{p.getCenter()},100)}),google.maps.event.addListener(p,"maptypeid_changed",function(){"OpenStreetMap"==p.getMapTypeId()?(p.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(T),T.innerHTML=d):p.controls[google.maps.ControlPosition.BOTTOM_RIGHT].clear(T)})}function t(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}function o(){const e=document.getElementById("address").value;geocoder.geocode({address:e,partialmatch:!0},a)}function a(e,t){"OK"==t&&e.length>0?p.fitBounds(e[0].geometry.viewport):alert(`Geocode was not successful for the following reason: ${t}`)}if(!document.getElementById)return;if(!document.getElementById("map_canvas"))return;let p;$("#geocode").on("click",()=>(o(),!1)),$("#config-form").submit(()=>{const e=`${p.getCenter().lat()}, ${p.getCenter().lng()}`,t=p.getZoom(),o=p.getMapTypeId();return $('input[name="myGmaps_center"]').attr("value",e),$('input[name="myGmaps_zoom"]').attr("value",t),$('input[name="myGmaps_type"]').attr("value",o),!0}),e()});