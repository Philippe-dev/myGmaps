$(()=>{if(document.getElementById&&document.getElementById("map_canvas")){function e(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}function a(){if(""==$('input[name="myGmaps_center"]').attr("value"))var a=new google.maps.LatLng(43.0395797336425,6.126280043989323),t="12";else{const p=$('input[name="myGmaps_center"]').attr("value").split(","),o=parseFloat(e(p[0])),n=parseFloat(e(p[1]));a=new google.maps.LatLng(o,n),t=$('input[name="myGmaps_zoom"]').attr("value"),$('input[name="myGmaps_type"]').attr("value")}google.maps.event.trigger(map_add,"resize"),map_add.setCenter(a),map_add.setZoom(parseFloat(t))}function t(){const e=`${map_add.getCenter().lat()},${map_add.getCenter().lng()}`,a=map_add.getZoom(),t=map_add.getMapTypeId();$("input[name=myGmaps_center]").attr("value",e),$("input[name=myGmaps_zoom]").attr("value",a),$("input[name=myGmaps_type]").attr("value",t)}if($("#settings").on("onetabload",()=>{a()}),$("#gmap-area label").on("click",()=>{a()}),""==$('input[name="myGmaps_center"]').attr("value")){var p=new google.maps.LatLng(43.0395797336425,6.126280043989323),o="12",n="roadmap";$('input[name="myGmaps_center"]').attr("value",p),$('input[name="myGmaps_zoom"]').attr("value",o),$('input[name="myGmaps_type"]').attr("value",n)}else{const a=$('input[name="myGmaps_center"]').attr("value").split(","),t=parseFloat(e(a[0])),m=parseFloat(e(a[1]));p=new google.maps.LatLng(t,m),o=$('input[name="myGmaps_zoom"]').attr("value"),n=$('input[name="myGmaps_type"]').attr("value")}const l=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,"OpenStreetMap","neutral_blue"],r=$("#map_styles_list").attr("value"),g=r.split(",");for(i in g)m=g[i].replace("_styles.js",""),l.push(m);const c={zoom:parseFloat(o),center:p,scrollwheel:!1,mapTypeControl:!0,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:l}};map_add=new google.maps.Map(document.getElementById("map_canvas"),c);const y='<a href="https://www.openstreetmap.org/copyright">Â© OpenStreetMap Contributors</a>',u=document.createElement("div");for(i in u.id="credit-control",u.style.fontSize="10px",u.style.fontFamily="Arial, sans-serif",u.style.margin="0",u.style.whitespace="nowrap",u.index=0,"roadmap"==n?map_add.setOptions({mapTypeId:google.maps.MapTypeId.ROADMAP}):"satellite"==n?map_add.setOptions({mapTypeId:google.maps.MapTypeId.SATELLITE}):"hybrid"==n?map_add.setOptions({mapTypeId:google.maps.MapTypeId.HYBRID}):"terrain"==n?map_add.setOptions({mapTypeId:google.maps.MapTypeId.TERRAIN}):"OpenStreetMap"==n?(map_add.setOptions({mapTypeId:"OpenStreetMap"}),map_add.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(u),u.innerHTML=y):map_add.setOptions({mapTypeId:n}),map_add.mapTypes.set("neutral_blue",neutral_blue),map_add.mapTypes.set("OpenStreetMap",new google.maps.ImageMapType({getTileUrl:(e,a)=>`https://tile.openstreetmap.org/${a}/${e.x}/${e.y}.png`,tileSize:new google.maps.Size(256,256),name:"OpenStreetMap",maxZoom:18})),l)if(!(i<6)){var m=window[l[i]];map_add.mapTypes.set(l[i],m)}geocoder=new google.maps.Geocoder;const _=document.getElementById("address");new google.maps.places.Autocomplete(_);function s(){const e=document.getElementById("address").value;geocoder.geocode({address:e,partialmatch:!0},d)}function d(e,a){"OK"==a&&e.length>0?map_add.fitBounds(e[0].geometry.viewport):alert(`Geocode was not successful for the following reason: ${a}`)}google.maps.event.addListener(map_add,"center_changed",()=>{window.setTimeout(()=>{map_add.getCenter()},100),t()}),google.maps.event.addListener(map_add,"zoom_changed",()=>{t()}),google.maps.event.addListener(map_add,"maptypeid_changed",()=>{"OpenStreetMap"==map_add.getMapTypeId()?(map_add.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(u),u.innerHTML=y):map_add.controls[google.maps.ControlPosition.BOTTOM_RIGHT].clear(u),t()}),geocoder=new google.maps.Geocoder,$("#geocode").on("click",()=>(s(),!1))}});