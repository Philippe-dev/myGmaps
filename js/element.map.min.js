"use strict";dotclear.ready(()=>{async function e(){function e(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}function o(e){const t=new RegExp("^(http(s)://)[a-zA-Z0-9.-]*[a-zA-Z0-9/_-]","g");return t.test(e)}function l(){j.length=0;const e=q.getLength();for(let t=0;t<e;t++)j.push(`${q.getAt(t).lat()}|${q.getAt(t).lng()}`);ye=j.join("\n"),ye=`${ye}\n${D.strokeWeight}`+"|"+D.strokeOpacity+"|"+D.strokeColor,document.getElementById("element_type").value="polyline",document.getElementById("post_excerpt").value=ye}function s(){j.length=0;const e=N.getLength();for(let t=0;t<e;t++)j.push(`${N.getAt(t).lat()}|${N.getAt(t).lng()}`);ye=j.join("\n"),ye=`${ye}\n${H.strokeWeight}`+"|"+H.strokeOpacity+"|"+H.strokeColor+"|"+H.fillColor+"|"+H.fillOpacity,document.getElementById("element_type").value="polygon",document.getElementById("post_excerpt").value=ye}function n(){const e=le.getBounds(),t=e.getNorthEast(),o=e.getSouthWest(),l=new google.maps.LatLng(t.lat(),o.lng()),s=new google.maps.LatLng(o.lat(),t.lng());ye=`${s.lat()}|${l.lng()}|${l.lat()}|${s.lng()}`,ye=`${ye}\n${le.strokeWeight}`+"|"+le.strokeOpacity+"|"+le.strokeColor+"|"+le.fillColor+"|"+le.fillOpacity,document.getElementById("element_type").value="rectangle",document.getElementById("post_excerpt").value=ye}function a(){const e=Z.getCenter(),t=Z.getRadius();ye=`${e.lat()}|${e.lng()}|${t}`,ye=`${ye}\n${Z.strokeWeight}`+"|"+Z.strokeOpacity+"|"+Z.strokeColor+"|"+Z.fillColor+"|"+Z.fillOpacity,document.getElementById("element_type").value="circle",document.getElementById("post_excerpt").value=ye}function i(){const e={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,draggable:!0,editable:!0};D=new google.maps.Polyline(e),q=D.getPath(),google.maps.event.addListener(D,"rightclick",e=>{null!=e.vertex&&D.getPath().removeAt(e.vertex)}),google.maps.event.addListener(q,"insert_at",_(()=>{l()},250)),google.maps.event.addListener(q,"remove_at",_(()=>{l()},250)),google.maps.event.addListener(q,"set_at",_(()=>{l()},250)),google.maps.event.addListener(D,"click",function(e){const o='<div id="infowindow_polyline" class="col"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'"></p><p><input type="submit" id="save" value="OK"></p></div>';pe.setPosition(e.latLng),pe.setContent(o),pe.open(t)})}function r(){const e={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,fillColor:"#ccc",fillOpacity:.35,draggable:!0,editable:!0};H=new google.maps.Polygon(e),N=H.getPath(),google.maps.event.addListener(H,"rightclick",e=>{null!=e.vertex&&H.getPath().removeAt(e.vertex)}),google.maps.event.addListener(N,"insert_at",_(()=>{s()},250)),google.maps.event.addListener(N,"remove_at",_(()=>{s()},250)),google.maps.event.addListener(N,"set_at",_(()=>{s()},250)),google.maps.event.addListener(H,"click",function(e){const o='<div id="infowindow_polygon"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'"></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'"></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'"></p></div><p><input type="submit" id="save" value="OK"></p></div>';pe.setPosition(e.latLng),pe.setContent(o),pe.open(t)})}function p(){const e={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,fillColor:"#ccc",fillOpacity:.35,draggable:!0,editable:!0};le=new google.maps.Rectangle(e),google.maps.event.addListener(le,"bounds_changed",_(()=>{n()},250)),google.maps.event.addListener(le,"dragend",_(()=>{n()},250)),google.maps.event.addListener(le,"click",function(e){const o='<div id="infowindow_rectangle"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'"></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'"></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'"></p></div><p><input type="submit" id="save" value="OK"></p></div>';pe.setPosition(e.latLng),pe.setContent(o),pe.open(t)})}function c(){const e={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,fillColor:"#ccc",fillOpacity:.35,center:T,draggable:!0,editable:!0,radius:1e3};Z=new google.maps.Circle(e),google.maps.event.addListener(Z,"center_changed",_(()=>{a()},250)),google.maps.event.addListener(Z,"radius_changed",_(()=>{a()},250)),google.maps.event.addListener(Z,"click",function(e){const o='<div id="infowindow_circle"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'"></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'"></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'"></p><p><label for="circle_radius">'+circle_radius_msg+'</label><input type="text" id="circle_radius" size="10" value="'+this.radius+'"></p></div><p><input type="submit" id="save" value="OK"></p></div>';pe.setPosition(e.latLng),pe.setContent(o),pe.open(t)})}function d(){U=new google.maps.KmlLayer({}),google.maps.event.addListener(U,"click",e=>{if(""!=document.getElementById("kmls_list").value){const e=[],t=(document.getElementById("kmls_base_url").value,document.getElementById("kmls_list").value),o=t.split(",");for(const t in o){const l=`<li>${o[t]}</li>`;e.push(l)}}Y=myKmls.join(),Y=`<ul>${Y.replace(/\,/g,"")}</ul>`,Q=""!=myKmls?`<h4>${custom_kmls_msg}</h4>`+'<div style="max-height: 100px;overflow: auto">'+Y+"</div><hr>":"";const o='<div id="infowindow_kml" style="cursor: pointer">'+Q+"<h4>"+kml_url_msg+'</h4><p><input type="text" id="kml_url" size="80" value="'+document.getElementById("post_excerpt").value+'"></p><p><input type="submit" id="save" value="OK"></p></div>';pe.setPosition(e.latLng),pe.setContent(o),pe.open(t)})}function m(){J=new google.maps.KmlLayer({}),google.maps.event.addListener(J,"click",e=>{const o='<div id="infowindow_georss" style="cursor: pointer"><h4>'+geoRss_url_msg+'</h4><p><input type="text" id="geoRss_url" size="80" value="'+document.getElementById("post_excerpt").value+'"></p><p><input type="submit" id="save" value="OK"></p></div>';pe.setPosition(e.latLng),pe.setContent(o),pe.open(t)})}function g(){X=new google.maps.DirectionsService;const e={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3},o={polylineOptions:e};ee=new google.maps.DirectionsRenderer(o);const s={strokeColor:"#555",strokeOpacity:0,strokeWeight:20,zIndex:1};te=new google.maps.Polyline(s),oe=te.getPath(),google.maps.event.addListener(q,"set_at",_(()=>{l()},250)),google.maps.event.addListener(te,"click",e=>{const o=ye.split("|"),l=o[0],s=o[1],n=o[2],a=o[3],i=o[4],r=o[5],p="true"==r?'checked = "checked"':"",c='<div id="infowindow_directions" style="cursor: pointer"><div class="two-cols clearfix"><div class="col70"><p><label for="directions_start">'+directions_start_msg+'</label><input type="text" id="directions_start" size="40" value="'+l+'"></p><p><label for="directions_end">'+directions_end_msg+'</label><input type="text" id="directions_end" size="40" value="'+s+'"></p><p><label for="directions_show"><input type="checkbox" id="directions_show" '+p+">"+directions_show_msg+'</label></p></div><div class="col30"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+i+'"><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+a+'"><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+n+'"></div></div><p><input type="submit" id="save" value="OK"></div>';pe.setPosition(e.latLng),pe.setContent(c),pe.open(t),google.maps.event.addListenerOnce(pe,"domready",()=>{const e=document.getElementById("directions_start"),t=document.getElementById("directions_end");new google.maps.places.Autocomplete(e),new google.maps.places.Autocomplete(t)})})}function u(){const e=document.getElementById("address").value;se.geocode({address:e,partialmatch:!0},y)}function y(e,o){"OK"===o&&e.length>0?t.fitBounds(e[0].geometry.viewport):alert(`Geocode was not successful for the following reason: ${o}`)}function _(e,t){let o;return function(){const l=arguments,s=()=>e.apply(this,l);clearTimeout(o),o=setTimeout(s,t)}}function v(e){const o=document.createElement("img");o.src=`${ge}pf=myGmaps/icons/marker.png`,K=new google.maps.marker.AdvancedMarkerElement({position:e,content:o,gmpDraggable:!0,map:t}),V.push(K),pe.setContent(ue),google.maps.event.addListener(K,"click",function(){pe.open(t,this)}),google.maps.event.addListener(K,"dragend",()=>{const e=K.content.src,t=K.position;ye=`${t.lat}|${t.lng}|${e}`,document.getElementById("post_excerpt").value=ye});const l=K.content.src,s=K.position;ye=ye=`${s.lat}|${s.lng}|${l}`,document.getElementById("element_type").value="point of interest",document.getElementById("post_excerpt").value=ye}function f(e){q.push(e),D.setMap(t),l()}function k(e){N.push(e),H.setMap(t),s()}function h(e){const o=2**t.getZoom();le.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng((e.lat()*o-50)/o,(e.lng()*o-75)/o),new google.maps.LatLng((e.lat()*o+50)/o,(e.lng()*o+75)/o))),le.setMap(t),n()}function w(e){const o=2**(10*Math.PI-t.getZoom()),l=o/500;Z.setOptions({radius:l,center:e}),Z.setMap(t),a()}function I(e){const o=[];let l;if(""!=document.getElementById("kmls_list").value){const e=document.getElementById("kmls_list").value,t=e.split(",");for(const e in t){const l=`<li>${t[e]}</li>`;o.push(l)}}let s=o.join();s=`<ul>${s.replace(/\,/g,"")}</ul>`,l=""!=o?`<h4>${custom_kmls_msg}</h4>`+'<div style="max-height: 100px;overflow: auto">'+s+"</div><hr>":"";const n='<div id="infowindow_kml" style="cursor: pointer">'+l+"<h4>"+kml_url_msg+'</h4><p><input type="text" id="kml_url" size="80" value="'+document.getElementById("post_excerpt").value+'"></p><p><input type="button" id="save" value="OK"></p></div>';pe.setPosition(e),pe.setContent(n),pe.open(t)}function E(e){const o='<div id="infowindow_georss" style="cursor: pointer"><h4>'+geoRss_url_msg+'</h4><p><input type="text" id="geoRss_url" size="80" value="'+document.getElementById("post_excerpt").value+'"></p><p><input type="submit" id="save" value="OK"></p></div>';pe.setPosition(e),pe.setContent(o),pe.open(t)}function b(e){const o="#555",l=.8,s=3,n='<div id="infowindow_directions" style="cursor: pointer"><div class="two-cols clearfix"><div class="col70"><p><label for="directions_start">'+directions_start_msg+'</label><input type="text" id="directions_start" size="40" value=""></p><p><label for="directions_end">'+directions_end_msg+'</label><input type="text" id="directions_end" size="40" value=""></p><p><label for="directions_show"><input type="checkbox" id="directions_show">'+directions_show_msg+'</label></p></div><div class="col30"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+o+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+l+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+s+'"></p></div></div><p><input type="submit" id="save" value="OK"></div>';pe.setPosition(e),pe.setContent(n),pe.open(t),google.maps.event.addListenerOnce(pe,"domready",()=>{const e=document.getElementById("directions_start"),t=document.getElementById("directions_end");new google.maps.places.Autocomplete(e),new google.maps.places.Autocomplete(t)})}function B(){document.querySelectorAll(".map_toolbar button").forEach(e=>{e.classList.remove("active"),e.classList.add("inactive")}),document.getElementById("delete_map").disabled=!0;for(const e in V)V[e].setMap(null);V=[],j=[],D.setOptions({}),D.setMap(null),i(),H.setOptions({}),H.setMap(null),r(),le.setOptions({}),le.setMap(null),p(),Z.setOptions({}),Z.setMap(null),c(),U.setOptions({}),U.setMap(null),d(),J.setOptions({}),J.setMap(null),m(),te.setMap(null),ee.setMap(null),g(),document.getElementById("element_type").value="",document.getElementById("post_excerpt").value=""}const{Map:L}=await google.maps.importLibrary("maps"),{Places:O}=await google.maps.importLibrary("places"),{AdvancedMarkerElement:x,PinElement:M}=await google.maps.importLibrary("marker");let T,C,F;if(document.querySelectorAll(".map_toolbar button").forEach(e=>{e.addEventListener("click",function(){"delete_map"===this.id?B():""===document.getElementById("post_excerpt").value&&(document.querySelectorAll(".map_toolbar button").forEach(e=>{e.classList.remove("active")}),this.classList.add("active"))})}),""==document.querySelector("input[name=myGmaps_center]").value)T=new google.maps.LatLng(43.0395797336425,6.126280043989323),C="12",F="roadmap";else{const t=document.querySelector("input[name=myGmaps_center]").value.split(","),o=parseFloat(e(t[0])),l=parseFloat(e(t[1]));T=new google.maps.LatLng(o,l),C=document.querySelector("input[name=myGmaps_zoom]").value,F=document.querySelector("input[name=myGmaps_type]").value}const $=[{featureType:"water",elementType:"geometry",stylers:[{color:"#193341"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2c5a71"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#29768a"},{lightness:-37}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#406d80"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#406d80"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#3e606f"},{weight:2},{gamma:.84}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry",stylers:[{weight:.6},{color:"#1a3541"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#2c5a71"}]}],z=new google.maps.StyledMapType($,{name:"Neutral Blue"}),S=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,"OpenStreetMap","neutral_blue"],P=document.getElementById("map_styles_list").value,A=P.split(",");for(const e in A){const t=A[e].replace("_styles.js","");S.push(t);const o=dotclear.getData(t);window[t]=new google.maps.StyledMapType(o.style,{name:o.name})}const W={mapId:"element-map",zoom:parseFloat(C),center:T,scrollwheel:!1,mapTypeControl:!0,overviewMapControl:!0,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:S}};t=new L(document.getElementById("map_canvas"),W);const G='<a href="https://www.openstreetmap.org/copyright">© OpenStreetMap Contributors</a>',R=document.createElement("div");R.id="credit-control",R.index=0,"roadmap"==F?t.setOptions({mapTypeId:google.maps.MapTypeId.ROADMAP}):"satellite"==F?t.setOptions({mapTypeId:google.maps.MapTypeId.SATELLITE}):"hybrid"==F?t.setOptions({mapTypeId:google.maps.MapTypeId.HYBRID}):"terrain"==F?t.setOptions({mapTypeId:google.maps.MapTypeId.TERRAIN}):"OpenStreetMap"==F?(t.setOptions({mapTypeId:"OpenStreetMap"}),t.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(R),R.innerHTML=G):t.setOptions({mapTypeId:F}),t.mapTypes.set("neutral_blue",z),t.mapTypes.set("OpenStreetMap",new google.maps.ImageMapType({getTileUrl:(e,t)=>`https://tile.openstreetmap.org/${t}/${e.x}/${e.y}.png`,tileSize:new google.maps.Size(256,256),name:"OpenStreetMap",maxZoom:18}));for(let e in S){if(e<6)continue;const o=window[S[e]];t.mapTypes.set(S[e],o)}let K,D,q,H,N,V=[],j=[];i(),r();let Z,U,Y,Q,J,X,ee,te,oe,le=null;p(),c(),d(),m(),g();const se=new google.maps.Geocoder,ne=document.getElementById("address"),ae=document.getElementById("geocode"),ie=document.getElementById("map_toolbar"),re=new google.maps.places.PlaceAutocompleteElement;ie.insertBefore(re,ae),re.addEventListener("gmp-select",async({placePrediction:e})=>{const t=e.toPlace();await t.fetchFields({fields:["displayName","formattedAddress","location"]}),ne.value=t.formattedAddress}),document.getElementById("geocode").addEventListener("click",e=>{e.preventDefault(),u()}),google.maps.event.addListener(t,"click",e=>{pe.close();let t="none";const o=document.querySelectorAll(".map_toolbar button.active").length>0;document.querySelectorAll(".map_toolbar button").forEach(e=>{e.classList.contains("active")?t=e.id:o&&e.classList.add("inactive")}),"add_marker"==t?""==document.getElementById("post_excerpt").value&&(v(e.latLng),document.getElementById("delete_map").disabled=!1):"add_polyline"==t?(f(e.latLng),document.getElementById("delete_map").disabled=!1):"add_polygon"==t?(k(e.latLng),document.getElementById("delete_map").disabled=!1):"add_kml"==t?""==document.getElementById("post_excerpt").value&&(I(e.latLng),document.getElementById("delete_map").disabled=!1):"add_georss"==t?""==document.getElementById("post_excerpt").value&&(E(e.latLng),document.getElementById("delete_map").disabled=!1):"add_rectangle"==t?""==document.getElementById("post_excerpt").value&&(h(e.latLng),document.getElementById("delete_map").disabled=!1):"add_circle"==t?""==document.getElementById("post_excerpt").value&&(w(e.latLng),document.getElementById("delete_map").disabled=!1):"add_directions"==t&&""==document.getElementById("post_excerpt").value&&(b(e.latLng),document.getElementById("delete_map").disabled=!1)}),google.maps.event.addListener(t,"maptypeid_changed",()=>{"OpenStreetMap"==t.getMapTypeId()?(t.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(R),R.innerHTML=G):t.controls[google.maps.ControlPosition.BOTTOM_RIGHT].clear(R)});const pe=new google.maps.InfoWindow({}),ce=[];if(""!=document.getElementById("icons_list").value){const e=document.getElementById("icons_base_url").value,t=document.getElementById("icons_list").value,o=t.split(",");for(const t in o){const l=document.createElement("img");l.src=`${e}${o[t]}`,l.alt=o[t],ce.push(l.outerHTML)}}let de,me=ce.join();me=me.replace(/\,/g,"");const ge=document.getElementById("plugin_QmarkURL").value;de=""!=me?`<h4>${custom_icons_msg}</h4>`+'<div id="custom_icons_list">'+me+"</div><hr>":"";const ue='<div id="infowindow_icons" style="cursor: pointer">'+de+'<div id="default_icons_list"><h4>'+default_icons_msg+'</h4><img src="'+ge+'pf=myGmaps/icons/marker-blue.png" alt="marker-blue.png" ><img src="'+ge+'pf=myGmaps/icons/marker-green.png" alt="marker-green.png" ><img src="'+ge+'pf=myGmaps/icons/marker-grey.png" alt="marker-grey.png" ><img src="'+ge+'pf=myGmaps/icons/marker-orange.png" alt="marker-orange.png" ><img src="'+ge+'pf=myGmaps/icons/marker-purple.png" alt="marker-purple.png" ><img src="'+ge+'pf=myGmaps/icons/marker-yellow.png" alt="marker-yellow.png" ><img src="'+ge+'pf=myGmaps/icons/marker.png" alt="marker.png" >&nbsp;</div></div>';document.addEventListener("click",e=>{if(e.target.matches("#infowindow_icons img")){let t=document.getElementById("post_excerpt").value;const o=t.split("|"),l=(parseFloat(o[0]),parseFloat(o[1]),document.createElement("img"));l.src=e.target.src,K.content=l;const s="IMG"===e.target.tagName?e.target.src:"",n=K.position;t=`${n.lat}|${n.lng}|${s}`,document.getElementById("post_excerpt").value=t,pe.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_polyline #save")){const e=document.getElementById("stroke_color").value,t=document.getElementById("stroke_opacity").value,o=document.getElementById("stroke_weight").value;D.setOptions({strokeColor:e,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(o)}),l(),pe.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_polygon #save")){const e=document.getElementById("stroke_color").value,t=document.getElementById("stroke_opacity").value,o=document.getElementById("stroke_weight").value,l=document.getElementById("fill_color").value,n=document.getElementById("fill_opacity").value;H.setOptions({strokeColor:e,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(o),fillColor:l,fillOpacity:parseFloat(n)}),s(),pe.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_rectangle #save")){const e=document.getElementById("stroke_weight").value,t=document.getElementById("stroke_opacity").value,o=document.getElementById("stroke_color").value,l=document.getElementById("fill_color").value,s=document.getElementById("fill_opacity").value;le.setOptions({strokeColor:o,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(e),fillColor:l,fillOpacity:parseFloat(s)}),n(),pe.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_circle #save")){const e=document.getElementById("stroke_weight").value,t=document.getElementById("stroke_opacity").value,o=document.getElementById("stroke_color").value,l=document.getElementById("fill_color").value,s=document.getElementById("fill_opacity").value,n=document.getElementById("circle_radius").value;Z.setOptions({strokeColor:o,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(e),fillColor:l,fillOpacity:parseFloat(s),radius:parseFloat(n)}),a(),pe.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_kml li")){const t=document.getElementById("kmls_base_url").value+e.target.textContent;document.getElementById("kml_url").value=t,document.getElementById("kml_url").focus()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_kml #save")){U.setMap(null);const e=document.getElementById("kml_url").value;null!=e&&""!=e&&o(e)&&(U.setOptions({url:e,preserveViewport:!0,suppressInfoWindows:!0}),document.getElementById("element_type").value="included kml file",document.getElementById("post_excerpt").value=e),U.setMap(t),pe.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_georss #save")){J.setMap(null);const e=document.getElementById("geoRss_url").value;null!=e&&""!=e&&o(e)&&(J.setOptions({url:e,preserveViewport:!0,suppressInfoWindows:!0}),document.getElementById("element_type").value="GeoRSS feed",document.getElementById("post_excerpt").value=e),J.setMap(t),pe.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_directions #save")){const e=document.getElementById("directions_start").value,o=document.getElementById("directions_end").value,l=document.getElementById("directions_show").checked,s=document.getElementById("stroke_color").value,n=document.getElementById("stroke_opacity").value,a=document.getElementById("stroke_weight").value,i={strokeColor:s,strokeOpacity:n,strokeWeight:a},r={polylineOptions:i},p={origin:e,destination:o,travelMode:google.maps.TravelMode.DRIVING};X.route(p,(e,o)=>{if(o==google.maps.DirectionsStatus.OK){const o=e.routes[0].overview_path;te.setPath(o),ee.setOptions({options:r}),ee.setDirections(e),ee.setMap(t)}}),ye=`${e}|${o}|${a}`+"|"+n+"|"+s+"|"+l,document.getElementById("element_type").value="directions",document.getElementById("post_excerpt").value=ye,ee.setMap(t),te.setMap(t),pe.close()}});let ye=document.getElementById("post_excerpt").value,_e=document.querySelector("input[name=element_type]").value;if("point of interest"==_e){const e=ye.split("|"),o=parseFloat(e[0]),l=parseFloat(e[1]),s=e[2],n=new google.maps.LatLng(o,l),a=document.createElement("img");a.src=s,K=new google.maps.marker.AdvancedMarkerElement({position:n,gmpDraggable:!0,content:a,map:t}),V.push(K),document.getElementById("add_marker").classList.add("active"),pe.setContent(ue),google.maps.event.addListener(K,"click",function(){pe.open(t,this)}),google.maps.event.addListener(K,"dragend",()=>{const e=K.content.src,t=K.position;ye=`${t.lat}|${t.lng}|${e}`,document.getElementById("post_excerpt").value=ye})}else if("polyline"==_e){const e=ye.split("\n");for(let t=0;t<e.length-1;t++){const o=e[t].split("|"),l=parseFloat(o[0]),s=parseFloat(o[1]),n=new google.maps.LatLng(l,s);q.push(n)}const o=e.pop(),l=o.split("|"),s=parseFloat(l[0]),n=parseFloat(l[1]),a=l[2];D.setOptions({strokeColor:a,strokeOpacity:parseFloat(n),strokeWeight:parseFloat(s)}),q=D.getPath(),D.setMap(t),document.getElementById("add_polyline").classList.add("active")}else if("polygon"==_e){const e=ye.split("\n");for(let t=0;t<e.length-1;t++){const o=e[t].split("|"),l=parseFloat(o[0]),s=parseFloat(o[1]),n=new google.maps.LatLng(l,s);N.push(n)}const o=e.pop(),l=o.split("|"),s=parseFloat(l[0]),n=parseFloat(l[1]),a=l[2],i=l[3],r=parseFloat(l[4]);H.setOptions({strokeColor:a,strokeOpacity:parseFloat(n),strokeWeight:parseFloat(s),fillColor:i,fillOpacity:parseFloat(r)}),N=H.getPath(),H.setMap(t),document.getElementById("add_polygon").classList.add("active")}else if("rectangle"==_e){const e=ye.split("\n"),o=e[0].split("|"),l=parseFloat(o[0]),s=parseFloat(o[1]),n=parseFloat(o[2]),a=parseFloat(o[3]),i=new google.maps.LatLngBounds(new google.maps.LatLng(l,s),new google.maps.LatLng(n,a));le.setBounds(i);const r=e[1].split("|"),p=parseFloat(r[0]),c=parseFloat(r[1]),d=r[2],m=r[3],g=parseFloat(r[4]);le.setOptions({strokeColor:d,strokeOpacity:parseFloat(c),strokeWeight:parseFloat(p),fillColor:m,fillOpacity:parseFloat(g)}),document.getElementById("add_rectangle").classList.add("active"),le.setMap(t)}else if("circle"==_e){const e=ye.split("\n"),o=e[0].split("|"),l=parseFloat(o[0]),s=parseFloat(o[1]),n=parseFloat(o[2]),a=new google.maps.LatLng(l,s),i=e[1].split("|"),r=parseFloat(i[0]),p=parseFloat(i[1]),c=i[2],d=i[3],m=parseFloat(i[4]);Z.setOptions({strokeColor:c,strokeOpacity:parseFloat(p),strokeWeight:parseFloat(r),fillColor:d,fillOpacity:parseFloat(m),center:a,radius:parseFloat(n)}),document.getElementById("add_circle").classList.add("active"),Z.setMap(t)}else if("included kml file"==_e)U.setOptions({url:ye,preserveViewport:!0,suppressInfoWindows:!0}),document.getElementById("add_kml").classList.add("active"),U.setMap(t);else if("GeoRSS feed"==_e)J.setOptions({url:ye,preserveViewport:!0,suppressInfoWindows:!0}),document.getElementById("add_georss").classList.add("active"),J.setMap(t);else if("directions"==_e){const e=ye.split("|"),o=e[0],l=e[1],s=e[2],n=e[3],a=e[4],i={strokeColor:a,strokeOpacity:n,strokeWeight:s},r={polylineOptions:i},p={origin:o,destination:l,travelMode:google.maps.TravelMode.DRIVING};X.route(p,(e,o)=>{if(o==google.maps.DirectionsStatus.OK){const o=e.routes[0].overview_path;te.setPath(o),ee.setOptions({options:r}),ee.setDirections(e),ee.setMap(t)}}),document.getElementById("add_directions").classList.add("active"),te.setMap(t)}document.getElementById("entry-form").addEventListener("submit",()=>{const e=document.getElementById("element_type").value;""===e&&(document.getElementById("element_type").value="notype");const o=`${t.getCenter().lat()},${t.getCenter().lng()}`,l=t.getZoom(),s=t.getMapTypeId();return document.querySelector("input[name=myGmaps_center]").value=o,document.querySelector("input[name=myGmaps_zoom]").value=l,document.querySelector("input[name=myGmaps_type]").value=s,!0})}if(!document.getElementById)return;if(!document.getElementById("map_canvas"))return;let t;e()});