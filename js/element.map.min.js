$(()=>{async function e(){function e(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}function i(e){const t=new RegExp("^(http(s)://)[a-zA-Z0-9.-]*[a-zA-Z0-9/_-]","g");return t.test(e)}function m(){K.length=0;const e=V.getLength();for(let t=0;t<e;t++)K.push(`${V.getAt(t).lat()}|${V.getAt(t).lng()}`);le=K.join("\n"),le=`${le}\n${S.strokeWeight}`+"|"+S.strokeOpacity+"|"+S.strokeColor,$("#element_type").val("polyline"),$("#post_excerpt").val(le)}function _(){K.length=0;const e=H.getLength();for(let t=0;t<e;t++)K.push(`${H.getAt(t).lat()}|${H.getAt(t).lng()}`);le=K.join("\n"),le=`${le}\n${E.strokeWeight}`+"|"+E.strokeOpacity+"|"+E.strokeColor+"|"+E.fillColor+"|"+E.fillOpacity,$("#element_type").val("polygon"),$("#post_excerpt").val(le)}function v(){const e=j.getBounds(),t=e.getNorthEast(),o=e.getSouthWest(),s=new google.maps.LatLng(t.lat(),o.lng()),l=new google.maps.LatLng(o.lat(),t.lng());le=`${l.lat()}|${s.lng()}|${s.lat()}|${l.lng()}`,le=`${le}\n${j.strokeWeight}`+"|"+j.strokeOpacity+"|"+j.strokeColor+"|"+j.fillColor+"|"+j.fillOpacity,$("#element_type").val("rectangle"),$("#post_excerpt").val(le)}function u(){const e=U.getCenter(),t=U.getRadius();le=`${e.lat()}|${e.lng()}|${t}`,le=`${le}\n${U.strokeWeight}`+"|"+U.strokeOpacity+"|"+U.strokeColor+"|"+U.fillColor+"|"+U.fillOpacity,$("#element_type").val("circle"),$("#post_excerpt").val(le)}function k(){const e=document.getElementById("address").value;geocoder.geocode({address:e,partialmatch:!0},y)}function y(e,t){"OK"==t&&e.length>0?g.fitBounds(e[0].geometry.viewport):alert(`Geocode was not successful for the following reason: ${t}`)}const{Map:f}=await google.maps.importLibrary("maps"),{Places:h}=await google.maps.importLibrary("places");if(""==$("input[name=myGmaps_center]").val())var w=new google.maps.LatLng(43.0395797336425,6.126280043989323),b="12",O="roadmap";else{var x=$("input[name=myGmaps_center]").val().split(","),L=parseFloat(e(x[0])),C=parseFloat(e(x[1]));w=new google.maps.LatLng(L,C),b=$("input[name=myGmaps_zoom]").val(),O=$("input[name=myGmaps_type]").val()}const F=[{featureType:"water",elementType:"geometry",stylers:[{color:"#193341"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2c5a71"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#29768a"},{lightness:-37}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#406d80"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#406d80"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#3e606f"},{weight:2},{gamma:.84}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry",stylers:[{weight:.6},{color:"#1a3541"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#2c5a71"}]}],M=new google.maps.StyledMapType(F,{name:"Neutral Blue"}),z=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,"OpenStreetMap","neutral_blue"],T=$("#map_styles_list").val(),I=T.split(",");for(re in I){R=I[re].replace("_styles.js",""),z.push(R);const e=dotclear.getData(R);window[R]=new google.maps.StyledMapType(e.style,{name:e.name})}const P={zoom:parseFloat(b),center:w,scrollwheel:!1,mapTypeControl:!0,overviewMapControl:!0,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:z}};g=new f(document.getElementById("map_canvas"),P);const W='<a href="https://www.openstreetmap.org/copyright">Â© OpenStreetMap Contributors</a>',G=document.createElement("div");for(re in G.id="credit-control",G.index=0,"roadmap"==O?g.setOptions({mapTypeId:google.maps.MapTypeId.ROADMAP}):"satellite"==O?g.setOptions({mapTypeId:google.maps.MapTypeId.SATELLITE}):"hybrid"==O?g.setOptions({mapTypeId:google.maps.MapTypeId.HYBRID}):"terrain"==O?g.setOptions({mapTypeId:google.maps.MapTypeId.TERRAIN}):"OpenStreetMap"==O?(g.setOptions({mapTypeId:"OpenStreetMap"}),g.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(G),G.innerHTML=W):g.setOptions({mapTypeId:O}),g.mapTypes.set("neutral_blue",M),g.mapTypes.set("OpenStreetMap",new google.maps.ImageMapType({getTileUrl:(e,t)=>`https://tile.openstreetmap.org/${t}/${e.x}/${e.y}.png`,tileSize:new google.maps.Size(256,256),name:"OpenStreetMap",maxZoom:18})),z)if(!(re<6)){var R=window[z[re]];g.mapTypes.set(z[re],R)}geocoder=new google.maps.Geocoder;const A=document.getElementById("address");new google.maps.places.Autocomplete(A);var S,B=[],K=[];const D={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,draggable:!0,editable:!0};S=new google.maps.Polyline(D);var E,V=S.getPath();const N={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,fillColor:"#ccc",fillOpacity:.35,draggable:!0,editable:!0};E=new google.maps.Polygon(N);var j,H=E.getPath();const Z={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,fillColor:"#ccc",fillOpacity:.35,draggable:!0,editable:!0};var U;j=new google.maps.Rectangle(Z);const Y={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,fillColor:"#ccc",fillOpacity:.35,center:w,draggable:!0,editable:!0,radius:1e3};var Q,q;U=new google.maps.Circle(Y),Q=new google.maps.KmlLayer({}),q=new google.maps.KmlLayer({});const J=new google.maps.DirectionsService;var X,ee={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3},te={polylineOptions:ee},oe=new google.maps.DirectionsRenderer(te);const se={strokeColor:"#555",strokeOpacity:0,strokeWeight:20,zIndex:1};X=new google.maps.Polyline(se);X.getPath();var le=$("#post_excerpt").val();if("point of interest"==he){x=le.split("|"),L=parseFloat(x[0]),C=parseFloat(x[1]);const e=x[2];var ie=new google.maps.LatLng(L,C);marker=new google.maps.Marker({position:ie,draggable:!0,icon:e,map:g}),B.push(marker),$("#add_marker").addClass("active"),_e.setContent(fe),google.maps.event.addListener(marker,"click",function(){_e.open(g,this)}),google.maps.event.addListener(marker,"dragend",()=>{le=`${marker.position.lat()}|${marker.position.lng()}|${e}`,$("#post_excerpt").val(le)})}else if("polyline"==he){for(var ae=le.split("\n"),re=0;re<ae.length-1;re++){x=ae[re].split("|"),L=parseFloat(x[0]),C=parseFloat(x[1]),ie=new google.maps.LatLng(L,C);V.push(ie)}const e=ae.pop();x=e.split("|");var pe=parseFloat(x[0]),ne=parseFloat(x[1]),ce=x[2];S.setOptions({strokeColor:ce,strokeOpacity:parseFloat(ne),strokeWeight:parseFloat(pe)}),V=S.getPath(),S.setMap(g),$("#add_polyline").addClass("active")}else if("polygon"==he){for(ae=le.split("\n"),re=0;re<ae.length-1;re++){x=ae[re].split("|"),L=parseFloat(x[0]),C=parseFloat(x[1]),ie=new google.maps.LatLng(L,C);H.push(ie)}const e=ae.pop();x=e.split("|"),pe=parseFloat(x[0]),ne=parseFloat(x[1]),ce=x[2];var de=x[3],ge=parseFloat(x[4]);E.setOptions({strokeColor:ce,strokeOpacity:parseFloat(ne),strokeWeight:parseFloat(pe),fillColor:de,fillOpacity:parseFloat(ge)}),H=E.getPath(),E.setMap(g),$("#add_polygon").addClass("active")}else if("rectangle"==he){ae=le.split("\n"),x=ae[0].split("|");const e=parseFloat(x[0]),t=parseFloat(x[1]),o=parseFloat(x[2]),s=parseFloat(x[3]);bounds=new google.maps.LatLngBounds(new google.maps.LatLng(e,t),new google.maps.LatLng(o,s)),j.setBounds(bounds);var me=ae[1].split("|");pe=parseFloat(me[0]),ne=parseFloat(me[1]),ce=me[2],de=me[3],ge=parseFloat(me[4]);j.setOptions({strokeColor:ce,strokeOpacity:parseFloat(ne),strokeWeight:parseFloat(pe),fillColor:de,fillOpacity:parseFloat(ge)}),$("#add_rectangle").addClass("active"),j.setMap(g)}else if("circle"==he){ae=le.split("\n"),x=ae[0].split("|"),L=parseFloat(x[0]),C=parseFloat(x[1]);const e=parseFloat(x[2]);ie=new google.maps.LatLng(L,C),me=ae[1].split("|"),pe=parseFloat(me[0]),ne=parseFloat(me[1]),ce=me[2],de=me[3],ge=parseFloat(me[4]);U.setOptions({strokeColor:ce,strokeOpacity:parseFloat(ne),strokeWeight:parseFloat(pe),fillColor:de,fillOpacity:parseFloat(ge),center:ie,radius:parseFloat(e)}),$("#add_circle").addClass("active"),U.setMap(g)}else if("included kml file"==he)Q.setOptions({url:le,preserveViewport:!0,suppressInfoWindows:!0}),$("#add_kml").addClass("active"),Q.setMap(g);else if("GeoRSS feed"==he)q.setOptions({url:le,preserveViewport:!0,suppressInfoWindows:!0}),$("#add_georss").addClass("active"),q.setMap(g);else if("directions"==he){x=le.split("|");const e=x[0],t=x[1];pe=x[2],ne=x[3],ce=x[4],ee={strokeColor:ce,strokeOpacity:ne,strokeWeight:pe},te={polylineOptions:ee};const o={origin:e,destination:t,travelMode:google.maps.TravelMode.DRIVING};J.route(o,(e,t)=>{if(t==google.maps.DirectionsStatus.OK){const t=e.routes[0].overview_path;X.setPath(t),oe.setOptions({options:te}),oe.setDirections(e),oe.setMap(g)}}),$("#add_directions").addClass("active"),X.setMap(g)}google.maps.event.addListener(g,"click",e=>{_e.close();let t="none";const i=$(".map_toolbar button.active").length>0;$(".map_toolbar button").each(function(){$(this).hasClass("active")?t=$(this).attr("id"):i&&$(this).addClass("inactive")}),"add_marker"==t?""==$("#post_excerpt").val()&&o(e.latLng):"add_polyline"==t?s(e.latLng):"add_polygon"==t?l(e.latLng):"add_kml"==t?""==$("#post_excerpt").val()&&p(e.latLng):"add_georss"==t?""==$("#post_excerpt").val()&&n(e.latLng):"add_rectangle"==t?""==$("#post_excerpt").val()&&a(e.latLng):"add_circle"==t?""==$("#post_excerpt").val()&&r(e.latLng):"add_directions"==t&&""==$("#post_excerpt").val()&&c(e.latLng)}),google.maps.event.addListener(g,"maptypeid_changed",()=>{"OpenStreetMap"==g.getMapTypeId()?(g.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(G),G.innerHTML=W):g.controls[google.maps.ControlPosition.BOTTOM_RIGHT].clear(G)}),google.maps.event.addListener(S,"rightclick",e=>{null!=e.vertex&&S.getPath().removeAt(e.vertex)}),google.maps.event.addListener(V,"insert_at",t(()=>{m()},250)),google.maps.event.addListener(V,"remove_at",t(()=>{m()},250)),google.maps.event.addListener(V,"set_at",t(()=>{m()},250)),google.maps.event.addListener(S,"click",function(e){const t='<div id="infowindow_polyline" class="col"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'" /></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'" /></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'" /></p><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(E,"rightclick",e=>{null!=e.vertex&&E.getPath().removeAt(e.vertex)}),google.maps.event.addListener(H,"insert_at",t(()=>{_()},250)),google.maps.event.addListener(H,"remove_at",t(()=>{_()},250)),google.maps.event.addListener(H,"set_at",t(()=>{_()},250)),google.maps.event.addListener(E,"click",function(e){const t='<div id="infowindow_polygon"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'" /></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'" /></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'" /></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'" /></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'" /></p></div><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(j,"bounds_changed",t(()=>{v()},250)),google.maps.event.addListener(j,"dragend",t(()=>{v()},250)),google.maps.event.addListener(j,"click",function(e){const t='<div id="infowindow_rectangle"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'" /></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'" /></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'" /></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'" /></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'" /></p></div><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(U,"center_changed",t(()=>{u()},250)),google.maps.event.addListener(U,"radius_changed",t(()=>{u()},250)),google.maps.event.addListener(U,"click",function(e){const t='<div id="infowindow_circle"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'" /></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'" /></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'" /></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'" /></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'" /></p><p><label for="circle_radius">'+circle_radius_msg+'</label><input type="text" id="circle_radius" size="10" value="'+this.radius+'" /></p></div><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(Q,"click",e=>{const t=[];if(""!=$("#kmls_list").val()){$("#kmls_base_url").val();const e=$("#kmls_list").val(),o=e.split(",");for(re in o)this_kml=`<li>${o[re]}</li>`,t.push(this_kml)}let o=t.join();if(o=`<ul>${o.replace(/\,/g,"")}</ul>`,""!=t)var s=`<h4>${custom_kmls_msg}</h4>`+'<div style="max-height: 100px;overflow: auto">'+o+"</div><hr />";else s="";const l='<div id="infowindow_kml" style="cursor: pointer">'+s+"<h4>"+kml_url_msg+'</h4><p><input type="text" id="kml_url" size="80" value="'+$("#post_excerpt").val()+'" /></p><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(l),_e.open(g)}),google.maps.event.addListener(q,"click",e=>{const t='<div id="infowindow_georss" style="cursor: pointer"><h4>'+geoRss_url_msg+'</h4><p><input type="text" id="geoRss_url" size="80" value="'+$("#post_excerpt").val()+'" /></p><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(X,"click",e=>{const t=le.split("|"),o=t[0],s=t[1],l=t[2],i=t[3],a=t[4],r=t[5];if("true"==r)var p='checked = "checked"';else p="";const n='<div id="infowindow_directions" style="cursor: pointer"><div class="two-cols clearfix"><div class="col70"><p><label for="directions_start">'+directions_start_msg+'</label><input type="text" id="directions_start" size="40" value="'+o+'" /></p><p><label for="directions_end">'+directions_end_msg+'</label><input type="text" id="directions_end" size="40" value="'+s+'" /></p><p><label for="directions_show"><input type="checkbox" id="directions_show" '+p+" />"+directions_show_msg+'</label></p></div><div class="col30"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+a+'" /><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+i+'" /><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+l+'" /></div></div><p><input type="button" id="save" value="OK" /></div>';_e.setPosition(e.latLng),_e.setContent(n),_e.open(g);const c=document.getElementById("directions_start");new google.maps.places.Autocomplete(c);const d=document.getElementById("directions_end");new google.maps.places.Autocomplete(d)});var _e=new google.maps.InfoWindow({});const ve=[];if(""!=$("#icons_list").val()){const e=$("#icons_base_url").val(),t=$("#icons_list").val(),o=t.split(",");for(re in o){const t=`<img src="${e}${o[re]}" alt="${o[re]}" />`;ve.push(t)}}let ue=ve.join();ue=ue.replace(/\,/g,"");var ke=$("#plugin_QmarkURL").val();if(""!=ue)var ye=`<h4>${custom_icons_msg}</h4>`+'<div id="custom_icons_list">'+ue+"</div><hr />";else ye="";var fe='<div id="infowindow_icons" style="cursor: pointer">'+ye+'<div id="default_icons_list"><h4>'+default_icons_msg+'</h4><img src="'+ke+'pf=myGmaps/icons/marker-blue.png" alt="marker-blue.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-green.png" alt="marker-green.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-grey.png" alt="marker-grey.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-orange.png" alt="marker-orange.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-purple.png" alt="marker-purple.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-yellow.png" alt="marker-yellow.png"  /><img src="'+ke+'pf=myGmaps/icons/marker.png" alt="marker.png"  />&nbsp;</div></div>';$(document).on("click","#infowindow_icons img",function(){let e=$("#post_excerpt").val();const t=e.split("|");parseFloat(t[0]),parseFloat(t[1]);marker.setIcon($(this).attr("src"));const o=$(this).attr("src");e=`${marker.position.lat()}|${marker.position.lng()}|${o}`,$("#post_excerpt").val(e),_e.close()}),$(document).on("click","#infowindow_polyline #save",()=>{const e=$("#stroke_color").val(),t=$("#stroke_opacity").val(),o=$("#stroke_weight").val();S.setOptions({strokeColor:e,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(o)}),m(),_e.close()}),$(document).on("click","#infowindow_polygon #save",()=>{const e=$("#stroke_color").val(),t=$("#stroke_opacity").val(),o=$("#stroke_weight").val(),s=$("#fill_color").val(),l=$("#fill_opacity").val();E.setOptions({strokeColor:e,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(o),fillColor:s,fillOpacity:parseFloat(l)}),_(),_e.close()}),$(document).on("click","#infowindow_rectangle #save",()=>{const e=$("#stroke_weight").val(),t=$("#stroke_opacity").val(),o=$("#stroke_color").val(),s=$("#fill_color").val(),l=$("#fill_opacity").val();j.setOptions({strokeColor:o,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(e),fillColor:s,fillOpacity:parseFloat(l)}),v(),_e.close()}),$(document).on("click","#infowindow_circle #save",()=>{const e=$("#stroke_weight").val(),t=$("#stroke_opacity").val(),o=$("#stroke_color").val(),s=$("#fill_color").val(),l=$("#fill_opacity").val(),i=$("#circle_radius").val();U.setOptions({strokeColor:o,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(e),fillColor:s,fillOpacity:parseFloat(l),radius:parseFloat(i)}),u(),_e.close()}),$(document).on("click","#infowindow_kml li",function(){const e=$("#kmls_base_url").val()+$(this).text();$("#kml_url").val(e).focus()}),$(document).on("click","#infowindow_kml #save",()=>{Q.setMap(null);const e=$("#kml_url").val();null!=e&&""!=e&&i(e)&&(Q.setOptions({url:e,preserveViewport:!0,suppressInfoWindows:!0}),$("#element_type").val("included kml file"),$("#post_excerpt").val(e)),Q.setMap(g),_e.close()}),$(document).on("click","#infowindow_georss #save",()=>{q.setMap(null);const e=$("#geoRss_url").val();null!=e&&""!=e&&i(e)&&(q.setOptions({url:e,preserveViewport:!0,suppressInfoWindows:!0}),$("#element_type").val("GeoRSS feed"),$("#post_excerpt").val(e)),q.setMap(g),_e.close()}),$(document).on("click","#infowindow_directions #save",()=>{const e=$("#directions_start").val(),t=$("#directions_end").val(),o=$("#directions_show").prop("checked"),s=$("#stroke_color").val(),l=$("#stroke_opacity").val(),i=$("#stroke_weight").val(),a={strokeColor:s,strokeOpacity:l,strokeWeight:i},r={polylineOptions:a},p={origin:e,destination:t,travelMode:google.maps.TravelMode.DRIVING};J.route(p,(e,t)=>{if(t==google.maps.DirectionsStatus.OK){const t=e.routes[0].overview_path;X.setPath(t),oe.setOptions({options:r}),oe.setDirections(e),oe.setMap(g)}}),le=`${e}|${t}|${i}`+"|"+l+"|"+s+"|"+o,$("#element_type").val("directions"),$("#post_excerpt").val(le),oe.setMap(g),X.setMap(g),_e.close()}),$(".map_toolbar button").on("click",function(){"delete_map"==$(this).attr("id")?d():""==$("#post_excerpt").val()&&($(".map_toolbar button").each(function(){$(this).removeClass("active")}),$(this).addClass("active"))}),$("#geocode").on("click",()=>(k(),!1)),google.maps.event.addListener(S,"rightclick",e=>{null!=e.vertex&&S.getPath().removeAt(e.vertex)}),google.maps.event.addListener(V,"insert_at",t(()=>{m()},250)),google.maps.event.addListener(V,"remove_at",t(()=>{m()},250)),google.maps.event.addListener(V,"set_at",t(()=>{m()},250)),google.maps.event.addListener(S,"click",function(e){const t='<div id="infowindow_polyline" class="col"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'" /></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'" /></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'" /></p><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(E,"rightclick",e=>{null!=e.vertex&&E.getPath().removeAt(e.vertex)}),google.maps.event.addListener(H,"insert_at",t(()=>{_()},250)),google.maps.event.addListener(H,"remove_at",t(()=>{_()},250)),google.maps.event.addListener(H,"set_at",t(()=>{_()},250)),google.maps.event.addListener(E,"click",function(e){const t='<div id="infowindow_polygon"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'" /></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'" /></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'" /></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'" /></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'" /></p></div><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(j,"bounds_changed",t(()=>{v()},250)),google.maps.event.addListener(j,"dragend",t(()=>{v()},250)),google.maps.event.addListener(j,"click",function(e){const t='<div id="infowindow_rectangle"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'" /></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'" /></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'" /></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'" /></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'" /></p></div><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(U,"center_changed",t(()=>{u()},250)),google.maps.event.addListener(U,"radius_changed",t(()=>{u()},250)),google.maps.event.addListener(U,"click",function(e){const t='<div id="infowindow_circle"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'" /></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'" /></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'" /></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'" /></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'" /></p><p><label for="circle_radius">'+circle_radius_msg+'</label><input type="text" id="circle_radius" size="10" value="'+this.radius+'" /></p></div><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(Q,"click",e=>{const t=[];if(""!=$("#kmls_list").val()){$("#kmls_base_url").val();const e=$("#kmls_list").val(),o=e.split(",");for(re in o)this_kml=`<li>${o[re]}</li>`,t.push(this_kml)}let o=t.join();if(o=`<ul>${o.replace(/\,/g,"")}</ul>`,""!=t)var s=`<h4>${custom_kmls_msg}</h4>`+'<div style="max-height: 100px;overflow: auto">'+o+"</div><hr />";else s="";const l='<div id="infowindow_kml" style="cursor: pointer">'+s+"<h4>"+kml_url_msg+'</h4><p><input type="text" id="kml_url" size="80" value="'+$("#post_excerpt").val()+'" /></p><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(l),_e.open(g)}),google.maps.event.addListener(q,"click",e=>{const t='<div id="infowindow_georss" style="cursor: pointer"><h4>'+geoRss_url_msg+'</h4><p><input type="text" id="geoRss_url" size="80" value="'+$("#post_excerpt").val()+'" /></p><p><input type="button" id="save" value="OK" /></p></div>';_e.setPosition(e.latLng),_e.setContent(t),_e.open(g)}),google.maps.event.addListener(X,"click",e=>{const t=le.split("|"),o=t[0],s=t[1],l=t[2],i=t[3],a=t[4],r=t[5];if("true"==r)var p='checked = "checked"';else p="";const n='<div id="infowindow_directions" style="cursor: pointer"><div class="two-cols clearfix"><div class="col70"><p><label for="directions_start">'+directions_start_msg+'</label><input type="text" id="directions_start" size="40" value="'+o+'" /></p><p><label for="directions_end">'+directions_end_msg+'</label><input type="text" id="directions_end" size="40" value="'+s+'" /></p><p><label for="directions_show"><input type="checkbox" id="directions_show" '+p+" />"+directions_show_msg+'</label></p></div><div class="col30"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+a+'" /><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+i+'" /><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+l+'" /></div></div><p><input type="button" id="save" value="OK" /></div>';_e.setPosition(e.latLng),_e.setContent(n),_e.open(g);const c=document.getElementById("directions_start");new google.maps.places.Autocomplete(c);const d=document.getElementById("directions_end");new google.maps.places.Autocomplete(d)});_e=new google.maps.InfoWindow({}),fe='<div id="infowindow_icons" style="cursor: pointer">'+ye+'<div id="default_icons_list"><h4>'+default_icons_msg+'</h4><img src="'+ke+'pf=myGmaps/icons/marker-blue.png" alt="marker-blue.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-green.png" alt="marker-green.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-grey.png" alt="marker-grey.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-orange.png" alt="marker-orange.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-purple.png" alt="marker-purple.png"  /><img src="'+ke+'pf=myGmaps/icons/marker-yellow.png" alt="marker-yellow.png"  /><img src="'+ke+'pf=myGmaps/icons/marker.png" alt="marker.png"  />&nbsp;</div></div>';$(document).on("click","#infowindow_icons img",function(){let e=$("#post_excerpt").val();const t=e.split("|");parseFloat(t[0]),parseFloat(t[1]);marker.setIcon($(this).attr("src"));const o=$(this).attr("src");e=`${marker.position.lat()}|${marker.position.lng()}|${o}`,$("#post_excerpt").val(e),_e.close()}),$(document).on("click","#infowindow_polyline #save",()=>{const e=$("#stroke_color").val(),t=$("#stroke_opacity").val(),o=$("#stroke_weight").val();S.setOptions({strokeColor:e,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(o)}),m(),_e.close()}),$(document).on("click","#infowindow_polygon #save",()=>{const e=$("#stroke_color").val(),t=$("#stroke_opacity").val(),o=$("#stroke_weight").val(),s=$("#fill_color").val(),l=$("#fill_opacity").val();E.setOptions({strokeColor:e,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(o),fillColor:s,fillOpacity:parseFloat(l)}),_(),_e.close()}),$(document).on("click","#infowindow_rectangle #save",()=>{const e=$("#stroke_weight").val(),t=$("#stroke_opacity").val(),o=$("#stroke_color").val(),s=$("#fill_color").val(),l=$("#fill_opacity").val();j.setOptions({strokeColor:o,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(e),fillColor:s,fillOpacity:parseFloat(l)}),v(),_e.close()}),$(document).on("click","#infowindow_circle #save",()=>{const e=$("#stroke_weight").val(),t=$("#stroke_opacity").val(),o=$("#stroke_color").val(),s=$("#fill_color").val(),l=$("#fill_opacity").val(),i=$("#circle_radius").val();U.setOptions({strokeColor:o,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(e),fillColor:s,fillOpacity:parseFloat(l),radius:parseFloat(i)}),u(),_e.close()}),$(document).on("click","#infowindow_kml li",function(){const e=$("#kmls_base_url").val()+$(this).text();$("#kml_url").val(e).focus()}),$(document).on("click","#infowindow_kml #save",()=>{Q.setMap(null);const e=$("#kml_url").val();null!=e&&""!=e&&i(e)&&(Q.setOptions({url:e,preserveViewport:!0,suppressInfoWindows:!0}),$("#element_type").val("included kml file"),$("#post_excerpt").val(e)),Q.setMap(g),_e.close()}),$(document).on("click","#infowindow_georss #save",()=>{q.setMap(null);const e=$("#geoRss_url").val();null!=e&&""!=e&&i(e)&&(q.setOptions({url:e,preserveViewport:!0,suppressInfoWindows:!0}),$("#element_type").val("GeoRSS feed"),$("#post_excerpt").val(e)),q.setMap(g),_e.close()}),$(document).on("click","#infowindow_directions #save",()=>{const e=$("#directions_start").val(),t=$("#directions_end").val(),o=$("#directions_show").prop("checked"),s=$("#stroke_color").val(),l=$("#stroke_opacity").val(),i=$("#stroke_weight").val(),a={strokeColor:s,strokeOpacity:l,strokeWeight:i},r={polylineOptions:a},p={origin:e,destination:t,travelMode:google.maps.TravelMode.DRIVING};J.route(p,(e,t)=>{if(t==google.maps.DirectionsStatus.OK){const t=e.routes[0].overview_path;X.setPath(t),oe.setOptions({options:r}),oe.setDirections(e),oe.setMap(g)}}),le=`${e}|${t}|${i}`+"|"+l+"|"+s+"|"+o,$("#element_type").val("directions"),$("#post_excerpt").val(le),oe.setMap(g),X.setMap(g),_e.close()});le=$("#post_excerpt").val();const he=$("input[name=element_type]").val();if("point of interest"==he){x=le.split("|"),L=parseFloat(x[0]),C=parseFloat(x[1]);const e=x[2];ie=new google.maps.LatLng(L,C);marker=new google.maps.Marker({position:ie,draggable:!0,icon:e,map:g}),B.push(marker),$("#add_marker").addClass("active"),_e.setContent(fe),google.maps.event.addListener(marker,"click",function(){_e.open(g,this)}),google.maps.event.addListener(marker,"dragend",()=>{le=`${marker.position.lat()}|${marker.position.lng()}|${e}`,
$("#post_excerpt").val(le)})}else if("polyline"==he){for(ae=le.split("\n"),re=0;re<ae.length-1;re++){x=ae[re].split("|"),L=parseFloat(x[0]),C=parseFloat(x[1]),ie=new google.maps.LatLng(L,C);V.push(ie)}const e=ae.pop();x=e.split("|"),pe=parseFloat(x[0]),ne=parseFloat(x[1]),ce=x[2];S.setOptions({strokeColor:ce,strokeOpacity:parseFloat(ne),strokeWeight:parseFloat(pe)}),V=S.getPath(),S.setMap(g),$("#add_polyline").addClass("active")}else if("polygon"==he){for(ae=le.split("\n"),re=0;re<ae.length-1;re++){x=ae[re].split("|"),L=parseFloat(x[0]),C=parseFloat(x[1]),ie=new google.maps.LatLng(L,C);H.push(ie)}const e=ae.pop();x=e.split("|"),pe=parseFloat(x[0]),ne=parseFloat(x[1]),ce=x[2],de=x[3],ge=parseFloat(x[4]);E.setOptions({strokeColor:ce,strokeOpacity:parseFloat(ne),strokeWeight:parseFloat(pe),fillColor:de,fillOpacity:parseFloat(ge)}),H=E.getPath(),E.setMap(g),$("#add_polygon").addClass("active")}else if("rectangle"==he){ae=le.split("\n"),x=ae[0].split("|");const e=parseFloat(x[0]),t=parseFloat(x[1]),o=parseFloat(x[2]),s=parseFloat(x[3]);bounds=new google.maps.LatLngBounds(new google.maps.LatLng(e,t),new google.maps.LatLng(o,s)),j.setBounds(bounds);me=ae[1].split("|"),pe=parseFloat(me[0]),ne=parseFloat(me[1]),ce=me[2],de=me[3],ge=parseFloat(me[4]);j.setOptions({strokeColor:ce,strokeOpacity:parseFloat(ne),strokeWeight:parseFloat(pe),fillColor:de,fillOpacity:parseFloat(ge)}),$("#add_rectangle").addClass("active"),j.setMap(g)}else if("circle"==he){ae=le.split("\n"),x=ae[0].split("|"),L=parseFloat(x[0]),C=parseFloat(x[1]);const e=parseFloat(x[2]);ie=new google.maps.LatLng(L,C),me=ae[1].split("|"),pe=parseFloat(me[0]),ne=parseFloat(me[1]),ce=me[2],de=me[3],ge=parseFloat(me[4]);U.setOptions({strokeColor:ce,strokeOpacity:parseFloat(ne),strokeWeight:parseFloat(pe),fillColor:de,fillOpacity:parseFloat(ge),center:ie,radius:parseFloat(e)}),$("#add_circle").addClass("active"),U.setMap(g)}else if("included kml file"==he)Q.setOptions({url:le,preserveViewport:!0,suppressInfoWindows:!0}),$("#add_kml").addClass("active"),Q.setMap(g);else if("GeoRSS feed"==he)q.setOptions({url:le,preserveViewport:!0,suppressInfoWindows:!0}),$("#add_georss").addClass("active"),q.setMap(g);else if("directions"==he){x=le.split("|");const e=x[0],t=x[1];pe=x[2],ne=x[3],ce=x[4],ee={strokeColor:ce,strokeOpacity:ne,strokeWeight:pe},te={polylineOptions:ee};const o={origin:e,destination:t,travelMode:google.maps.TravelMode.DRIVING};J.route(o,(e,t)=>{if(t==google.maps.DirectionsStatus.OK){const t=e.routes[0].overview_path;X.setPath(t),oe.setOptions({options:te}),oe.setDirections(e),oe.setMap(g)}}),$("#add_directions").addClass("active"),X.setMap(g)}}function t(e,t){let o;return function(){const s=arguments,l=()=>e.apply(this,s);clearTimeout(o),o=setTimeout(l,t)}}function o(e){marker=new google.maps.Marker({position:e,icon:`${default_icons_url}pf=myGmaps/icons/marker.png`,draggable:!0,map:g}),markersArray.push(marker),infowindow.setContent(infowindowIcons),google.maps.event.addListener(marker,"click",function(){infowindow.open(g,this)}),google.maps.event.addListener(marker,"dragend",()=>{element_values=`${marker.position.lat()}|${marker.position.lng()}|${marker.icon}`,$("#post_excerpt").val(element_values)}),element_values=`${marker.position.lat()}|${marker.position.lng()}|${marker.icon}`,$("#element_type").val("point of interest"),$("#post_excerpt").val(element_values)}function s(e){polylinePath.push(e),polyline.setMap(g),updatePolyline()}function l(e){polygonPath.push(e),polygon.setMap(g),updatePolygon()}function a(e){const t=2**g.getZoom();rectangle.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng((e.lat()*t-50)/t,(e.lng()*t-75)/t),new google.maps.LatLng((e.lat()*t+50)/t,(e.lng()*t+75)/t))),rectangle.setMap(g),updateRectangle()}function r(e){const t=2**(10*Math.PI-g.getZoom()),o=t/500;circle.setOptions({radius:o,center:e}),circle.setMap(g),updateCircle()}function p(e){const t=[];if(""!=$("#kmls_list").val()){$("#kmls_base_url").val();const e=$("#kmls_list").val(),o=e.split(",");for(i in o)this_kml=`<li>${o[i]}</li>`,t.push(this_kml)}let o=t.join();if(o=`<ul>${o.replace(/\,/g,"")}</ul>`,""!=t)var s=`<h4>${custom_kmls_msg}</h4>`+'<div style="max-height: 100px;overflow: auto">'+o+"</div><hr />";else s="";const l='<div id="infowindow_kml" style="cursor: pointer">'+s+"<h4>"+kml_url_msg+'</h4><p><input type="text" id="kml_url" size="80" value="'+$("#post_excerpt").val()+'" /></p><p><input type="button" id="save" value="OK" /></p></div>';infowindow.setPosition(e),infowindow.setContent(l),infowindow.open(g)}function n(e){const t='<div id="infowindow_georss" style="cursor: pointer"><h4>'+geoRss_url_msg+'</h4><p><input type="text" id="geoRss_url" size="80" value="'+$("#post_excerpt").val()+'" /></p><p><input type="button" id="save" value="OK" /></p></div>';infowindow.setPosition(e),infowindow.setContent(t),infowindow.open(g)}function c(e){const t="#555",o=.8,s=3,l='<div id="infowindow_directions" style="cursor: pointer"><div class="two-cols clearfix"><div class="col70"><p><label for="directions_start">'+directions_start_msg+'</label><input type="text" id="directions_start" size="40" value="" /></p><p><label for="directions_end">'+directions_end_msg+'</label><input type="text" id="directions_end" size="40" value="" /></p><p><label for="directions_show"><input type="checkbox" id="directions_show" />'+directions_show_msg+'</label></p></div><div class="col30"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+t+'" /></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+o+'" /></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+s+'" /></p></div></div><p><input type="button" id="save" value="OK" /></div>';infowindow.setPosition(e),infowindow.setContent(l),infowindow.open(g);const i=document.getElementById("directions_start");new google.maps.places.Autocomplete(i);const a=document.getElementById("directions_end");new google.maps.places.Autocomplete(a)}function d(){for(i in $(".map_toolbar button").each(function(){$(this).removeClass("active"),$(this).removeClass("inactive")}),$("#delete_map").trigger("blur"),markersArray)markersArray[i].setMap(null);markersArray.length=0,vertexArray.length=0,polyline.setOptions({}),polylinePath.clear(),polyline.setMap(null),polygon.setOptions({}),polygonPath.clear(),polygon.setMap(null),rectangle.setOptions({}),rectangle.setMap(null),circle.setOptions({}),circle.setMap(null),kmlLayer.setOptions({}),kmlLayer.setMap(null),geoRssLayer.setOptions({}),geoRssLayer.setMap(null),routePolylinePath.clear(),routePolyline.setMap(null),directionsDisplay.setMap(null),$("#element_type").val("notype"),$("#post_excerpt").val("")}if(!document.getElementById)return;if(!document.getElementById("map_canvas"))return;let g;$(".map_toolbar button").each(function(){$(this).hasClass("active")||$(this).addClass("inactive")}),$("#entry-form").submit(()=>{""==element_type&&$("#element_type").val("notype");const e=`${g.getCenter().lat()},${g.getCenter().lng()}`,t=g.getZoom(),o=g.getMapTypeId();return $("input[name=myGmaps_center]").attr("value",e),$("input[name=myGmaps_zoom]").attr("value",t),$("input[name=myGmaps_type]").attr("value",o),!0}),e()});