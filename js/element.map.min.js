dotclear.ready(()=>{async function e(){function e(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}function o(e){const t=new RegExp("^(http(s)://)[a-zA-Z0-9.-]*[a-zA-Z0-9/_-]","g");return t.test(e)}function l(){A.length=0;const e=K.getLength();for(let t=0;t<e;t++)A.push(`${K.getAt(t).lat()}|${K.getAt(t).lng()}`);pe=A.join("\n"),pe=`${pe}\n${W.strokeWeight}`+"|"+W.strokeOpacity+"|"+W.strokeColor,document.getElementById("element_type").value="polyline",document.getElementById("post_excerpt").value=pe}function s(){A.length=0;const e=H.getLength();for(let t=0;t<e;t++)A.push(`${H.getAt(t).lat()}|${H.getAt(t).lng()}`);pe=A.join("\n"),pe=`${pe}\n${G.strokeWeight}`+"|"+G.strokeOpacity+"|"+G.strokeColor+"|"+G.fillColor+"|"+G.fillOpacity,document.getElementById("element_type").value="polygon",document.getElementById("post_excerpt").value=pe}function n(){const e=D.getBounds(),t=e.getNorthEast(),o=e.getSouthWest(),l=new google.maps.LatLng(t.lat(),o.lng()),s=new google.maps.LatLng(o.lat(),t.lng());pe=`${s.lat()}|${l.lng()}|${l.lat()}|${s.lng()}`,pe=`${pe}\n${D.strokeWeight}`+"|"+D.strokeOpacity+"|"+D.strokeColor+"|"+D.fillColor+"|"+D.fillOpacity,document.getElementById("element_type").value="rectangle",document.getElementById("post_excerpt").value=pe}function a(){const e=j.getCenter(),t=j.getRadius();pe=`${e.lat()}|${e.lng()}|${t}`,pe=`${pe}\n${j.strokeWeight}`+"|"+j.strokeOpacity+"|"+j.strokeColor+"|"+j.fillColor+"|"+j.fillOpacity,document.getElementById("element_type").value="circle",document.getElementById("post_excerpt").value=pe}function i(){const e=document.getElementById("address").value;geocoder.geocode({address:e,partialmatch:!0},r)}function r(e,o){"OK"==o&&e.length>0?t.fitBounds(e[0].geometry.viewport):alert(`Geocode was not successful for the following reason: ${o}`)}function p(e,t){let o;return function(){const l=arguments,s=()=>e.apply(this,l);clearTimeout(o),o=setTimeout(s,t)}}function c(e){marker=new google.maps.Marker({position:e,icon:`${ae}pf=myGmaps/icons/marker.png`,draggable:!0,map:t}),P.push(marker),le.setContent(re),google.maps.event.addListener(marker,"click",function(){le.open(t,this)}),google.maps.event.addListener(marker,"dragend",()=>{pe=`${marker.position.lat()}|${marker.position.lng()}|${marker.icon}`,document.getElementById("post_excerpt").value=pe}),pe=`${marker.position.lat()}|${marker.position.lng()}|${marker.icon}`,document.getElementById("element_type").value="point of interest",document.getElementById("post_excerpt").value=pe}function d(e){K.push(e),W.setMap(t),l()}function m(e){H.push(e),G.setMap(t),s()}function g(e){const o=2**t.getZoom();D.setBounds(new google.maps.LatLngBounds(new google.maps.LatLng((e.lat()*o-50)/o,(e.lng()*o-75)/o),new google.maps.LatLng((e.lat()*o+50)/o,(e.lng()*o+75)/o))),D.setMap(t),n()}function u(e){const o=2**(10*Math.PI-t.getZoom()),l=o/500;j.setOptions({radius:l,center:e}),j.setMap(t),a()}function y(e){const o=[];if(""!=document.getElementById("kmls_list").value){document.getElementById("kmls_base_url").value;const e=document.getElementById("kmls_list").value,t=e.split(",");for(ge in t)this_kml=`<li>${t[ge]}</li>`,o.push(this_kml)}let l=o.join();if(l=`<ul>${l.replace(/\,/g,"")}</ul>`,""!=o)var s=`<h4>${custom_kmls_msg}</h4>`+'<div style="max-height: 100px;overflow: auto">'+l+"</div><hr>";else s="";const n='<div id="infowindow_kml" style="cursor: pointer">'+s+"<h4>"+kml_url_msg+'</h4><p><input type="text" id="kml_url" size="80" value="'+document.getElementById("post_excerpt").value+'"></p><p><input type="button" id="save" value="OK"></p></div>';le.setPosition(e),le.setContent(n),le.open(t)}function _(e){const o='<div id="infowindow_georss" style="cursor: pointer"><h4>'+geoRss_url_msg+'</h4><p><input type="text" id="geoRss_url" size="80" value="'+document.getElementById("post_excerpt").value+'"></p><p><input type="button" id="save" value="OK"></p></div>';le.setPosition(e),le.setContent(o),le.open(t)}function v(e){const o="#555",l=.8,s=3,n='<div id="infowindow_directions" style="cursor: pointer"><div class="two-cols clearfix"><div class="col70"><p><label for="directions_start">'+directions_start_msg+'</label><input type="text" id="directions_start" size="40" value=""></p><p><label for="directions_end">'+directions_end_msg+'</label><input type="text" id="directions_end" size="40" value=""></p><p><label for="directions_show"><input type="checkbox" id="directions_show">'+directions_show_msg+'</label></p></div><div class="col30"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+o+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+l+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+s+'"></p></div></div><p><input type="button" id="save" value="OK"></div>';le.setPosition(e),le.setContent(n),le.open(t);const a=document.getElementById("directions_start");new google.maps.places.Autocomplete(a);const i=document.getElementById("directions_end");new google.maps.places.Autocomplete(i)}function k(){for(ge in document.querySelectorAll(".map_toolbar button").forEach(e=>{e.classList.remove("active"),e.classList.add("inactive")}),document.getElementById("delete_map").disabled=!0,P)P[ge].setMap(null);P=[],A=[],W.setOptions({}),W.setMap(null),G.setOptions({}),G.setMap(null),D.setOptions({}),D.setMap(null),j.setOptions({}),j.setMap(null),Z.setOptions({}),Z.setMap(null),U.setOptions({}),U.setMap(null),Q.setMap(null),ee.setMap(null),document.getElementById("element_type").value="",document.getElementById("post_excerpt").value=""}const{Map:f}=await google.maps.importLibrary("maps"),{Places:h}=await google.maps.importLibrary("places");if(document.querySelectorAll(".map_toolbar button").forEach(e=>{e.addEventListener("click",function(){"delete_map"===this.id?k():""===document.getElementById("post_excerpt").value&&(document.querySelectorAll(".map_toolbar button").forEach(e=>{e.classList.remove("active")}),this.classList.add("active"))})}),""==document.querySelector("input[name=myGmaps_center]").value)var w=new google.maps.LatLng(43.0395797336425,6.126280043989323),I="12",b="roadmap";else{var E=document.querySelector("input[name=myGmaps_center]").value.split(","),B=parseFloat(e(E[0])),L=parseFloat(e(E[1]));w=new google.maps.LatLng(B,L),I=document.querySelector("input[name=myGmaps_zoom]").value,b=document.querySelector("input[name=myGmaps_type]").value}const O=[{featureType:"water",elementType:"geometry",stylers:[{color:"#193341"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2c5a71"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#29768a"},{lightness:-37}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#406d80"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#406d80"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#3e606f"},{weight:2},{gamma:.84}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry",stylers:[{weight:.6},{color:"#1a3541"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#2c5a71"}]}],x=new google.maps.StyledMapType(O,{name:"Neutral Blue"}),C=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,"OpenStreetMap","neutral_blue"],M=document.getElementById("map_styles_list").value,T=M.split(",");for(ge in T){S=T[ge].replace("_styles.js",""),C.push(S);const e=dotclear.getData(S);window[S]=new google.maps.StyledMapType(e.style,{name:e.name})}const F={zoom:parseFloat(I),center:w,scrollwheel:!1,mapTypeControl:!0,overviewMapControl:!0,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:C}};t=new f(document.getElementById("map_canvas"),F);const $='<a href="https://www.openstreetmap.org/copyright">Â© OpenStreetMap Contributors</a>',z=document.createElement("div");for(ge in z.id="credit-control",z.index=0,"roadmap"==b?t.setOptions({mapTypeId:google.maps.MapTypeId.ROADMAP}):"satellite"==b?t.setOptions({mapTypeId:google.maps.MapTypeId.SATELLITE}):"hybrid"==b?t.setOptions({mapTypeId:google.maps.MapTypeId.HYBRID}):"terrain"==b?t.setOptions({mapTypeId:google.maps.MapTypeId.TERRAIN}):"OpenStreetMap"==b?(t.setOptions({mapTypeId:"OpenStreetMap"}),t.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(z),z.innerHTML=$):t.setOptions({mapTypeId:b}),t.mapTypes.set("neutral_blue",x),t.mapTypes.set("OpenStreetMap",new google.maps.ImageMapType({getTileUrl:(e,t)=>`https://tile.openstreetmap.org/${t}/${e.x}/${e.y}.png`,tileSize:new google.maps.Size(256,256),name:"OpenStreetMap",maxZoom:18})),C)if(!(ge<6)){var S=window[C[ge]];t.mapTypes.set(C[ge],S)}geocoder=new google.maps.Geocoder,document.getElementById("geocode").addEventListener("click",()=>(i(),!1));var W,P=[],A=[];const R={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,draggable:!0,editable:!0};W=new google.maps.Polyline(R);var G,K=W.getPath();const q={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,fillColor:"#ccc",fillOpacity:.35,draggable:!0,editable:!0};G=new google.maps.Polygon(q);var D,H=G.getPath();const V={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,fillColor:"#ccc",fillOpacity:.35,draggable:!0,editable:!0};var j;D=new google.maps.Rectangle(V);const N={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3,fillColor:"#ccc",fillOpacity:.35,center:w,draggable:!0,editable:!0,radius:1e3};var Z,U;j=new google.maps.Circle(N),Z=new google.maps.KmlLayer({}),U=new google.maps.KmlLayer({});const Y=new google.maps.DirectionsService;var Q,J={strokeColor:"#555",strokeOpacity:.8,strokeWeight:3},X={polylineOptions:J},ee=new google.maps.DirectionsRenderer(X);const te={strokeColor:"#555",strokeOpacity:0,strokeWeight:20,zIndex:1};Q=new google.maps.Polyline(te);Q.getPath();const oe=document.getElementById("address");new google.maps.places.Autocomplete(oe);google.maps.event.addListener(t,"click",e=>{le.close();let t="none";const o=document.querySelectorAll(".map_toolbar button.active").length>0;document.querySelectorAll(".map_toolbar button").forEach(e=>{e.classList.contains("active")?t=e.id:o&&e.classList.add("inactive")}),"add_marker"==t?""==document.getElementById("post_excerpt").value&&(c(e.latLng),document.getElementById("delete_map").disabled=!1):"add_polyline"==t?(d(e.latLng),document.getElementById("delete_map").disabled=!1):"add_polygon"==t?(m(e.latLng),document.getElementById("delete_map").disabled=!1):"add_kml"==t?""==document.getElementById("post_excerpt").value&&(y(e.latLng),document.getElementById("delete_map").disabled=!1):"add_georss"==t?""==document.getElementById("post_excerpt").value&&(_(e.latLng),document.getElementById("delete_map").disabled=!1):"add_rectangle"==t?""==document.getElementById("post_excerpt").value&&(g(e.latLng),document.getElementById("delete_map").disabled=!1):"add_circle"==t?""==document.getElementById("post_excerpt").value&&(u(e.latLng),document.getElementById("delete_map").disabled=!1):"add_directions"==t&&""==document.getElementById("post_excerpt").value&&(v(e.latLng),document.getElementById("delete_map").disabled=!1)}),google.maps.event.addListener(t,"maptypeid_changed",()=>{"OpenStreetMap"==t.getMapTypeId()?(t.controls[google.maps.ControlPosition.BOTTOM_RIGHT].push(z),z.innerHTML=$):t.controls[google.maps.ControlPosition.BOTTOM_RIGHT].clear(z)}),google.maps.event.addListener(W,"rightclick",e=>{null!=e.vertex&&W.getPath().removeAt(e.vertex)}),google.maps.event.addListener(K,"insert_at",p(()=>{l()},250)),google.maps.event.addListener(K,"remove_at",p(()=>{l()},250)),google.maps.event.addListener(K,"set_at",p(()=>{l()},250)),google.maps.event.addListener(W,"click",function(e){const o='<div id="infowindow_polyline" class="col"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'"></p><p><input type="button" id="save" value="OK"></p></div>';le.setPosition(e.latLng),le.setContent(o),le.open(t)}),google.maps.event.addListener(G,"rightclick",e=>{null!=e.vertex&&G.getPath().removeAt(e.vertex)}),google.maps.event.addListener(H,"insert_at",p(()=>{s()},250)),google.maps.event.addListener(H,"remove_at",p(()=>{s()},250)),google.maps.event.addListener(H,"set_at",p(()=>{s()},250)),google.maps.event.addListener(G,"click",function(e){const o='<div id="infowindow_polygon"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'"></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'"></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'"></p></div><p><input type="button" id="save" value="OK"></p></div>';le.setPosition(e.latLng),le.setContent(o),le.open(t)}),google.maps.event.addListener(D,"bounds_changed",p(()=>{n()},250)),google.maps.event.addListener(D,"dragend",p(()=>{n()},250)),google.maps.event.addListener(D,"click",function(e){const o='<div id="infowindow_rectangle"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'"></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'"></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'"></p></div><p><input type="button" id="save" value="OK"></p></div>';le.setPosition(e.latLng),le.setContent(o),le.open(t)}),google.maps.event.addListener(j,"center_changed",p(()=>{a()},250)),google.maps.event.addListener(j,"radius_changed",p(()=>{a()},250)),google.maps.event.addListener(j,"click",function(e){const o='<div id="infowindow_circle"><div class="two-boxes"<p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+this.strokeColor+'"></p><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+this.strokeOpacity+'"></p><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+this.strokeWeight+'"></p></div><div class="two-boxes"<p><label for="fill_color">'+fill_color_msg+'</label><input type="text" id="fill_color" size="10" value="'+this.fillColor+'"></p><p><label for="fill_opacity">'+fill_opacity_msg+'</label><input type="text" id="fill_opacity" size="10" value="'+this.fillOpacity+'"></p><p><label for="circle_radius">'+circle_radius_msg+'</label><input type="text" id="circle_radius" size="10" value="'+this.radius+'"></p></div><p><input type="button" id="save" value="OK"></p></div>';le.setPosition(e.latLng),le.setContent(o),le.open(t)}),google.maps.event.addListener(Z,"click",e=>{const o=[];if(""!=document.getElementById("kmls_list").value){document.getElementById("kmls_base_url").value;const e=document.getElementById("kmls_list").value,t=e.split(",");for(ge in t)this_kml=`<li>${t[ge]}</li>`,o.push(this_kml)}let l=o.join();if(l=`<ul>${l.replace(/\,/g,"")}</ul>`,""!=o)var s=`<h4>${custom_kmls_msg}</h4>`+'<div style="max-height: 100px;overflow: auto">'+l+"</div><hr>";else s="";const n='<div id="infowindow_kml" style="cursor: pointer">'+s+"<h4>"+kml_url_msg+'</h4><p><input type="text" id="kml_url" size="80" value="'+document.getElementById("post_excerpt").value+'"></p><p><input type="button" id="save" value="OK"></p></div>';le.setPosition(e.latLng),le.setContent(n),le.open(t)}),google.maps.event.addListener(U,"click",e=>{const o='<div id="infowindow_georss" style="cursor: pointer"><h4>'+geoRss_url_msg+'</h4><p><input type="text" id="geoRss_url" size="80" value="'+document.getElementById("post_excerpt").value+'"></p><p><input type="button" id="save" value="OK"></p></div>';le.setPosition(e.latLng),le.setContent(o),le.open(t)}),google.maps.event.addListener(Q,"click",e=>{const o=pe.split("|"),l=o[0],s=o[1],n=o[2],a=o[3],i=o[4],r=o[5];if("true"==r)var p='checked = "checked"';else p="";const c='<div id="infowindow_directions" style="cursor: pointer"><div class="two-cols clearfix"><div class="col70"><p><label for="directions_start">'+directions_start_msg+'</label><input type="text" id="directions_start" size="40" value="'+l+'"></p><p><label for="directions_end">'+directions_end_msg+'</label><input type="text" id="directions_end" size="40" value="'+s+'"></p><p><label for="directions_show"><input type="checkbox" id="directions_show" '+p+">"+directions_show_msg+'</label></p></div><div class="col30"><p><label for="stroke_color">'+stroke_color_msg+'</label><input type="text" id="stroke_color" size="10" class="colorpicker" value="'+i+'"><p><label for="stroke_opacity">'+stroke_opacity_msg+'</label><input type="text" id="stroke_opacity" size="10" value="'+a+'"><p><label for="stroke_weight">'+stroke_weight_msg+'</label><input type="text" id="stroke_weight" size="10" value="'+n+'"></div></div><p><input type="button" id="save" value="OK"></div>';le.setPosition(e.latLng),le.setContent(c),le.open(t);const d=document.getElementById("directions_start");new google.maps.places.Autocomplete(d);const m=document.getElementById("directions_end");new google.maps.places.Autocomplete(m)});var le=new google.maps.InfoWindow({});const se=[];if(""!=document.getElementById("icons_list").value){const e=document.getElementById("icons_base_url").value,t=document.getElementById("icons_list").value,o=t.split(",");for(ge in o){const t=`<img src="${e}${o[ge]}" alt="${o[ge]}">`;se.push(t)}}let ne=se.join();ne=ne.replace(/\,/g,"");var ae=document.getElementById("plugin_QmarkURL").value;if(""!=ne)var ie=`<h4>${custom_icons_msg}</h4>`+'<div id="custom_icons_list">'+ne+"</div><hr>";else ie="";var re='<div id="infowindow_icons" style="cursor: pointer">'+ie+'<div id="default_icons_list"><h4>'+default_icons_msg+'</h4><img src="'+ae+'pf=myGmaps/icons/marker-blue.png" alt="marker-blue.png" ><img src="'+ae+'pf=myGmaps/icons/marker-green.png" alt="marker-green.png" ><img src="'+ae+'pf=myGmaps/icons/marker-grey.png" alt="marker-grey.png" ><img src="'+ae+'pf=myGmaps/icons/marker-orange.png" alt="marker-orange.png" ><img src="'+ae+'pf=myGmaps/icons/marker-purple.png" alt="marker-purple.png" ><img src="'+ae+'pf=myGmaps/icons/marker-yellow.png" alt="marker-yellow.png" ><img src="'+ae+'pf=myGmaps/icons/marker.png" alt="marker.png" >&nbsp;</div></div>';document.addEventListener("click",e=>{if(e.target.matches("#infowindow_icons img")){let t=document.getElementById("post_excerpt").value;const o=t.split("|");parseFloat(o[0]),parseFloat(o[1]);marker.setIcon(e.target.src);const l=e.target.src;t=`${marker.position.lat()}|${marker.position.lng()}|${l}`,document.getElementById("post_excerpt").value=t,le.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_polyline #save")){const e=document.getElementById("stroke_color").value,t=document.getElementById("stroke_opacity").value,o=document.getElementById("stroke_weight").value;W.setOptions({strokeColor:e,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(o)}),l(),le.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_polygon #save")){const e=document.getElementById("stroke_color").value,t=document.getElementById("stroke_opacity").value,o=document.getElementById("stroke_weight").value,l=document.getElementById("fill_color").value,n=document.getElementById("fill_opacity").value;G.setOptions({strokeColor:e,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(o),fillColor:l,fillOpacity:parseFloat(n)}),s(),le.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_rectangle #save")){const e=document.getElementById("stroke_weight").value,t=document.getElementById("stroke_opacity").value,o=document.getElementById("stroke_color").value,l=document.getElementById("fill_color").value,s=document.getElementById("fill_opacity").value;D.setOptions({strokeColor:o,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(e),fillColor:l,fillOpacity:parseFloat(s)}),n(),le.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_circle #save")){const e=document.getElementById("stroke_weight").value,t=document.getElementById("stroke_opacity").value,o=document.getElementById("stroke_color").value,l=document.getElementById("fill_color").value,s=document.getElementById("fill_opacity").value,n=document.getElementById("circle_radius").value;j.setOptions({strokeColor:o,strokeOpacity:parseFloat(t),strokeWeight:parseFloat(e),fillColor:l,fillOpacity:parseFloat(s),radius:parseFloat(n)}),a(),le.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_kml li")){const t=document.getElementById("kmls_base_url").value+e.target.textContent;document.getElementById("kml_url").value=t,document.getElementById("kml_url").focus()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_kml #save")){Z.setMap(null);const e=document.getElementById("kml_url").value;null!=e&&""!=e&&o(e)&&(Z.setOptions({url:e,preserveViewport:!0,suppressInfoWindows:!0}),document.getElementById("element_type").value="included kml file",document.getElementById("post_excerpt").value=e),Z.setMap(t),le.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_georss #save")){U.setMap(null);const e=document.getElementById("geoRss_url").value;null!=e&&""!=e&&o(e)&&(U.setOptions({url:e,preserveViewport:!0,suppressInfoWindows:!0}),document.getElementById("element_type").value="GeoRSS feed",document.getElementById("post_excerpt").value=e),U.setMap(t),le.close()}}),document.addEventListener("click",e=>{if(e.target.matches("#infowindow_directions #save")){const e=document.getElementById("directions_start").value,o=document.getElementById("directions_end").value,l=document.getElementById("directions_show").checked,s=document.getElementById("stroke_color").value,n=document.getElementById("stroke_opacity").value,a=document.getElementById("stroke_weight").value,i={strokeColor:s,strokeOpacity:n,strokeWeight:a},r={polylineOptions:i},p={origin:e,destination:o,travelMode:google.maps.TravelMode.DRIVING};Y.route(p,(e,o)=>{if(o==google.maps.DirectionsStatus.OK){const o=e.routes[0].overview_path;Q.setPath(o),ee.setOptions({options:r}),ee.setDirections(e),ee.setMap(t)}}),pe=`${e}|${o}|${a}`+"|"+n+"|"+s+"|"+l,document.getElementById("element_type").value="directions",document.getElementById("post_excerpt").value=pe,ee.setMap(t),Q.setMap(t),le.close()}});var pe=document.getElementById("post_excerpt").value;const ce=document.querySelector("input[name=element_type]").value;if("point of interest"==ce){E=pe.split("|"),B=parseFloat(E[0]),L=parseFloat(E[1]);const e=E[2];var de=new google.maps.LatLng(B,L);marker=new google.maps.Marker({position:de,draggable:!0,icon:e,map:t}),P.push(marker),document.getElementById("add_marker").classList.add("active"),le.setContent(re),google.maps.event.addListener(marker,"click",function(){le.open(t,this)}),google.maps.event.addListener(marker,"dragend",()=>{pe=`${marker.position.lat()}|${marker.position.lng()}|${e}`,document.getElementById("post_excerpt").value=pe})}else if("polyline"==ce){for(var me=pe.split("\n"),ge=0;ge<me.length-1;ge++){E=me[ge].split("|"),B=parseFloat(E[0]),L=parseFloat(E[1]),de=new google.maps.LatLng(B,L);K.push(de)}const e=me.pop();E=e.split("|");var ue=parseFloat(E[0]),ye=parseFloat(E[1]),_e=E[2];W.setOptions({strokeColor:_e,strokeOpacity:parseFloat(ye),strokeWeight:parseFloat(ue)}),K=W.getPath(),W.setMap(t),document.getElementById("add_polyline").classList.add("active")}else if("polygon"==ce){for(me=pe.split("\n"),ge=0;ge<me.length-1;ge++){E=me[ge].split("|"),B=parseFloat(E[0]),L=parseFloat(E[1]),de=new google.maps.LatLng(B,L);H.push(de)}const e=me.pop();E=e.split("|"),ue=parseFloat(E[0]),ye=parseFloat(E[1]),_e=E[2];var ve=E[3],ke=parseFloat(E[4]);G.setOptions({strokeColor:_e,strokeOpacity:parseFloat(ye),strokeWeight:parseFloat(ue),fillColor:ve,fillOpacity:parseFloat(ke)}),H=G.getPath(),G.setMap(t),document.getElementById("add_polygon").classList.add("active")}else if("rectangle"==ce){me=pe.split("\n"),E=me[0].split("|");const e=parseFloat(E[0]),o=parseFloat(E[1]),l=parseFloat(E[2]),s=parseFloat(E[3]);bounds=new google.maps.LatLngBounds(new google.maps.LatLng(e,o),new google.maps.LatLng(l,s)),D.setBounds(bounds);var fe=me[1].split("|");ue=parseFloat(fe[0]),ye=parseFloat(fe[1]),_e=fe[2],ve=fe[3],ke=parseFloat(fe[4]);D.setOptions({strokeColor:_e,strokeOpacity:parseFloat(ye),strokeWeight:parseFloat(ue),fillColor:ve,fillOpacity:parseFloat(ke)}),document.getElementById("add_rectangle").classList.add("active"),D.setMap(t)}else if("circle"==ce){me=pe.split("\n"),E=me[0].split("|"),B=parseFloat(E[0]),L=parseFloat(E[1]);const e=parseFloat(E[2]);de=new google.maps.LatLng(B,L),fe=me[1].split("|"),ue=parseFloat(fe[0]),ye=parseFloat(fe[1]),_e=fe[2],ve=fe[3],ke=parseFloat(fe[4]);j.setOptions({strokeColor:_e,strokeOpacity:parseFloat(ye),strokeWeight:parseFloat(ue),fillColor:ve,fillOpacity:parseFloat(ke),center:de,radius:parseFloat(e)}),document.getElementById("add_circle").classList.add("active"),j.setMap(t)}else if("included kml file"==ce)Z.setOptions({url:pe,preserveViewport:!0,suppressInfoWindows:!0}),document.getElementById("add_kml").classList.add("active"),Z.setMap(t);else if("GeoRSS feed"==ce)U.setOptions({url:pe,preserveViewport:!0,suppressInfoWindows:!0}),document.getElementById("add_georss").classList.add("active"),U.setMap(t);else if("directions"==ce){E=pe.split("|");const e=E[0],o=E[1];ue=E[2],ye=E[3],_e=E[4],J={strokeColor:_e,strokeOpacity:ye,strokeWeight:ue},X={polylineOptions:J};const l={origin:e,destination:o,travelMode:google.maps.TravelMode.DRIVING};Y.route(l,(e,o)=>{if(o==google.maps.DirectionsStatus.OK){const o=e.routes[0].overview_path;Q.setPath(o),ee.setOptions({options:X}),ee.setDirections(e),ee.setMap(t)}}),document.getElementById("add_directions").classList.add("active"),Q.setMap(t)}document.getElementById("entry-form").addEventListener("submit",()=>{const e=document.getElementById("element_type").value;""===e&&(document.getElementById("element_type").value="notype");const o=`${t.getCenter().lat()},${t.getCenter().lng()}`,l=t.getZoom(),s=t.getMapTypeId();return document.querySelector("input[name=myGmaps_center]").value=o,document.querySelector("input[name=myGmaps_zoom]").value=l,document.querySelector("input[name=myGmaps_type]").value=s,!0})}if(!document.getElementById)return;if(!document.getElementById("map_canvas"))return;let t;e()});